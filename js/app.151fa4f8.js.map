{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/AnimatedAbcNotation.vue?79e7","webpack:///./src/App.vue?6aa9","webpack:///./src/components/Challenge.vue?a66d","webpack:///./src/App.vue","webpack:///./src/components/ShowPlay.vue","webpack:///./src/components/AbcNotation.vue","webpack:///./src/components/AbcNotation.vue?0a36","webpack:///./src/components/AbcNotation.vue?c01e","webpack:///./src/components/ShowPlay.vue?13d7","webpack:///./src/components/ShowPlay.vue?c0ab","webpack:///./src/components/Challenge.vue","webpack:///./src/components/AnimatedAbcNotation.vue","webpack:///./src/components/AnimatedAbcNotation.vue?760d","webpack:///./src/Foundations.ts","webpack:///./src/generatePitchOptions.ts","webpack:///./src/midiToAbc.ts","webpack:///./src/challengeGenerator.ts","webpack:///./src/components/Challenge.vue?0562","webpack:///./src/components/Challenge.vue?a556","webpack:///./src/components/OptionalMidiCapability.vue","webpack:///./src/components/OptionalMidiCapability.vue?5e1d","webpack:///./src/components/OptionalMidiCapability.vue?884f","webpack:///./src/components/SubscriptionHandlingDeviceSelector.vue","webpack:///./src/components/MidiDeviceSelector.vue","webpack:///./src/components/MidiDeviceSelector.vue?0d28","webpack:///./src/components/MidiDeviceSelector.vue?76af","webpack:///./src/components/SubscriptionHandlingDeviceSelector.vue?90b9","webpack:///./src/components/SubscriptionHandlingDeviceSelector.vue?7442","webpack:///./src/components/Preferences.vue","webpack:///./src/components/SchemaBasedForm.vue","webpack:///./src/components/form/FormDropdown.vue","webpack:///./src/components/form/FormDropdown.vue?9d90","webpack:///./src/components/form/FormDropdown.vue?ac95","webpack:///./src/components/SchemaBasedForm.vue?5104","webpack:///./src/components/SchemaBasedForm.vue?bd9f","webpack:///./src/components/Preferences.vue?9adf","webpack:///./src/components/Preferences.vue?40c6","webpack:///./src/storedData.ts","webpack:///./src/components/ScoreBoard.vue","webpack:///./src/components/ScoreBoard.vue?5672","webpack:///./src/components/ScoreBoard.vue?f3ff","webpack:///./src/input/WebmidiInputKeyboardAdapter.ts","webpack:///./src/components/VirtualKeyboard.vue","webpack:///./src/components/VirtualKeyboard.vue?6451","webpack:///./src/components/VirtualKeyboard.vue?cb5c","webpack:///./src/input/VirtualKeyboardEventObserver.ts","webpack:///./src/input/DispatchingKeyboard.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","$i18n","midiReady","hasMidiSupport","showMidiOptions","deviceId","midiOptions","input","deviceChanged","midiInput","keyboard","showPreferences","preferences","$event","games","base-note","noteReading","baseNote","note-limit","noteLimit","speed","accidentals","gameFinished","settings","keyboardSettings","virtualKeyboard","broadcast","ref","abc","props","required","type","String","watch","this","render","mounted","methods","renderAbc","$refs","notation","add_classes","$emit","emits","components","AbcNotation","unmounted","removeListener","midiSubscription","addListener","pitch","scientificToAbcNotation","midiToNoteName","notes","innerHTML","class","gaming","animationDuration","heat","challenge","note","heats","successes","mistakes","finish","finished","reset","start","startViaKeyHint","postProcessAbc","style","styleVariables","Number","abcWidth","computed","$el","children","clientWidth","querySelectorAll","forEach","el","pathDefinition","getAttribute","replace","setAttribute","KEYS_IN_OCTAVE","ACCIDENTAL_KEYS","MIDI_TOP_PITCH","generatePitchOptions","avoidAccidentals","pitches","octave","includes","midiToAbc","sharps","AccidentalsConfiguration","getRandomValueFromArray","array","Math","floor","random","repetitionIsAvoidable","validPitches","previous","START_ON_KEY","validator","isInteger","default","timeout","undefined","generator","AnimatedAbcNotation","evaluateInput","assign","$data","$options","next","clearTimeout","Error","done","setTimeout","noResponse","midiPitch","evaluateResponse","loading","disable","created","enabled","enable","error","preferred","for","disabled","id","selected","inputs","option","manufacturer","getInputById","current","MidiDeviceSelector","legend","schema","user-data","i18n-prefix","preferencesUpdated","augmentedSchema","uuid","label","modelValue","options","optionLabel","optionValue","placeholder","Dropdown","Array","FormDropdown","userData","i18nPrefix","augmentSchema","SchemaForm","fields","keys","prop","placeholderMessage","te","setup","SchemaBasedForm","Fieldset","storedData","version","defaultValue","buildKey","storeValueJSON","localStorage","getItem","watchedValue","JSON","parse","newValue","setItem","stringify","deep","round","virtuosicScore","game","max","gameInfo","listeners","dispatcher","midiEvent","listener","index","indexOf","highlightedNotes","octaves","ceil","startNote","rest","startOctave","endOctave","piano","destroy","keyPlay","pianoChartNote","toString","midi","addKeyMouseUpListener","keyUp","addKeyMouseDownListener","keyDown","specificListener","keyboards","SubscriptionHandlingDeviceSelector","OptionalMidiCapability","Challenge","ShowPlay","Preferences","ScoreBoard","VirtualKeyboard","defaults","wrapMidiInput","webmidiInput","time","Date","toISOString","i18n","locale","messages","en","App","use","mount"],"mappings":"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","file":"js/app.151fa4f8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AnimatedAbcNotation.vue?vue&type=style&index=0&id=6877785e&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=476e0eb4&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Challenge.vue?vue&type=style&index=0&id=415f9abb&lang=css\"","<template>\n  <h1>{{ $i18n.t(\"header.title\") }}</h1>\n  <p>{{ $i18n.t(\"header.punchline\") }}</p>\n  <hr />\n  <OptionalMidiCapability @midiReady=\"midiReady\">\n    <div v-if=\"hasMidiSupport && showMidiOptions\">\n      <button @click=\"showMidiOptions = false\">\n        {{ $i18n.t(\"midiOptions.close\") }}\n      </button>\n      <h2>{{ $i18n.t(\"midiOptions.title\") }}</h2>\n      <fieldset>\n        <legend>{{ $i18n.t(\"midiOptions.input.title\") }}</legend>\n        <SubscriptionHandlingDeviceSelector\n          :deviceId=\"midiOptions.input\"\n          @deviceChanged=\"deviceChanged\"\n        />\n        <div v-if=\"midiInput\">\n          <h3>{{ $i18n.t(\"midiOptions.input.preview.title\") }}</h3>\n          <p>{{ $i18n.t(\"midiOptions.input.preview.description\") }}</p>\n          <ShowPlay :keyboard=\"midiInput\" />\n        </div>\n      </fieldset>\n    </div>\n    <div v-else-if=\"showPreferences\">\n      <button @click=\"showPreferences = false\">\n        {{ $i18n.t(\"preferences.close\") }}\n      </button>\n      <Preferences :preferences=\"preferences\" @updated=\"preferences = $event\" />\n    </div>\n    <div v-else>\n      <button v-if=\"hasMidiSupport\" @click=\"showMidiOptions = true\">\n        {{ $i18n.t(\"midiOptions.title\") }}\n      </button>\n      <button @click=\"showPreferences = true\">\n        {{ $i18n.t(\"preferences.title\") }}\n      </button>\n      <hr />\n      <ScoreBoard :games=\"games\" />\n      <hr />\n      <Challenge\n        :keyboard=\"keyboard\"\n        :base-note=\"preferences.noteReading.baseNote\"\n        :note-limit=\"preferences.noteReading.noteLimit\"\n        :speed=\"preferences.noteReading.speed\"\n        :accidentals=\"preferences.noteReading.accidentals\"\n        @finished=\"gameFinished\"\n      />\n      <VirtualKeyboard\n        :settings=\"preferences.keyboardSettings\"\n        @noteon=\"virtualKeyboard.broadcast($event)\"\n      />\n      <div v-if=\"!midiInput\">\n        {{ $i18n.t(\"error.noMidiDevice\") }}\n      </div>\n    </div>\n  </OptionalMidiCapability>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport ShowPlay from \"./components/ShowPlay.vue\";\nimport Challenge from \"./components/Challenge.vue\";\nimport OptionalMidiCapability from \"./components/OptionalMidiCapability.vue\";\nimport SubscriptionHandlingDeviceSelector from \"./components/SubscriptionHandlingDeviceSelector.vue\";\nimport Preferences from \"@/components/Preferences.vue\";\nimport WebMidi, { Input } from \"webmidi\";\nimport storedData from \"@/storedData\";\nimport midiOptionsDefaults from \"./midiOptions.defaults.json\";\nimport preferencesDefaults from \"./preferences.defaults.json\";\nimport ScoreBoard from \"@/components/ScoreBoard.vue\";\nimport GameInfo from \"@/types/GameInfo\";\nimport GameResult from \"@/types/GameResult\";\nimport WebmidiInputKeyboardAdapter from \"@/input/WebmidiInputKeyboardAdapter\";\nimport Keyboard from \"@/input/Keyboard\";\nimport VirtualKeyboard from \"@/components/VirtualKeyboard.vue\";\nimport VirtualKeyboardEventObserver from \"@/input/VirtualKeyboardEventObserver\";\nimport DispatchingKeyboard from \"@/input/DispatchingKeyboard\";\n\nexport default defineComponent({\n  name: \"App\",\n  data: () => ({\n    hasMidiSupport: false,\n    showMidiOptions: false,\n    showPreferences: false,\n    midiInput: null as Keyboard | null,\n    virtualKeyboard: new VirtualKeyboardEventObserver()\n  }),\n  components: {\n    SubscriptionHandlingDeviceSelector,\n    OptionalMidiCapability,\n    Challenge,\n    ShowPlay,\n    Preferences,\n    ScoreBoard,\n    VirtualKeyboard\n  },\n  computed: {\n    keyboard(): Keyboard {\n      const keyboards: Keyboard[] = [this.virtualKeyboard];\n      if (this.midiInput) {\n        keyboards.push(this.midiInput);\n      }\n      return new DispatchingKeyboard(keyboards);\n    }\n  },\n  setup() {\n    return {\n      midiOptions: storedData(\n        \"midiOptions\",\n        midiOptionsDefaults.version.toString(),\n        midiOptionsDefaults.defaults\n      ),\n      preferences: storedData(\n        \"preferences\",\n        preferencesDefaults.version.toString(),\n        preferencesDefaults.defaults\n      ),\n      games: storedData(\"games\", \"1\", [] as GameResult[])\n    };\n  },\n  methods: {\n    deviceChanged(current: Input) {\n      this.midiOptions.input = current.id;\n      this.midiInput = this.wrapMidiInput(current);\n    },\n    midiReady() {\n      this.hasMidiSupport = true;\n      if (this.midiOptions.input) {\n        const webmidiInput = WebMidi.getInputById(this.midiOptions.input);\n        this.midiInput = webmidiInput ? this.wrapMidiInput(webmidiInput) : null;\n      }\n      this.showMidiOptions = !this.midiInput;\n    },\n    gameFinished(gameInfo: GameInfo) {\n      this.games.push({\n        name: \"noteReading\",\n        time: new Date().toISOString(),\n        preferences: this.preferences.noteReading,\n        gameInfo\n      } as GameResult);\n    },\n    wrapMidiInput(input: Input) {\n      return new WebmidiInputKeyboardAdapter(input);\n    }\n  }\n});\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <AbcNotation :abc=\"abc\" />\n  <p ref=\"notes\"></p>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport AbcNotation from \"./AbcNotation.vue\";\nimport Midi from \"@tonaljs/midi\";\nimport TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport Keyboard from \"@/input/Keyboard\";\n\nexport default defineComponent({\n  name: \"ShowPlay\",\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    }\n  },\n  data: () => ({\n    abc: \"\"\n  }),\n  components: {\n    AbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.midiSubscription);\n  },\n  mounted() {\n    this.keyboard.addListener(this.midiSubscription);\n  },\n  methods: {\n    midiSubscription(pitch: number) {\n      const abc = TonalAbcNotation.scientificToAbcNotation(\n        Midi.midiToNoteName(pitch)\n      );\n      this.abc = `X:1\\nK:C\\n${abc}`;\n      (this.$refs.notes as HTMLElement).innerHTML += `${pitch} (${abc})<br />`;\n    }\n  }\n});\n</script>\n","<template>\n  <div ref=\"notation\"></div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport AbcNotation from \"abcjs\";\nimport \"abcjs/abcjs-audio.css\";\n\nexport default defineComponent({\n  props: {\n    abc: {\n      required: true,\n      type: String\n    }\n  },\n  watch: {\n    abc() {\n      this.render();\n    }\n  },\n  mounted() {\n    this.render();\n  },\n  methods: {\n    render() {\n      if (this.abc === \"\") {\n        return;\n      }\n      AbcNotation.renderAbc(this.$refs.notation as HTMLElement, this.abc, {\n        add_classes: true\n      });\n      this.$emit(\"rendered\");\n    }\n  },\n  emits: [\"rendered\"]\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\nimport AbcNotation from \"abcjs\";\nimport \"abcjs/abcjs-audio.css\";\n\nexport default defineComponent({\n  props: {\n    abc: {\n      required: true,\n      type: String\n    }\n  },\n  watch: {\n    abc() {\n      this.render();\n    }\n  },\n  mounted() {\n    this.render();\n  },\n  methods: {\n    render() {\n      if (this.abc === \"\") {\n        return;\n      }\n      AbcNotation.renderAbc(this.$refs.notation as HTMLElement, this.abc, {\n        add_classes: true\n      });\n      this.$emit(\"rendered\");\n    }\n  },\n  emits: [\"rendered\"]\n});\n","import { render } from \"./AbcNotation.vue?vue&type=template&id=620fa3c4\"\nimport script from \"./AbcNotation.vue?vue&type=script&lang=ts\"\nexport * from \"./AbcNotation.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, PropType } from \"vue\";\nimport AbcNotation from \"./AbcNotation.vue\";\nimport Midi from \"@tonaljs/midi\";\nimport TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport Keyboard from \"@/input/Keyboard\";\n\nexport default defineComponent({\n  name: \"ShowPlay\",\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    }\n  },\n  data: () => ({\n    abc: \"\"\n  }),\n  components: {\n    AbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.midiSubscription);\n  },\n  mounted() {\n    this.keyboard.addListener(this.midiSubscription);\n  },\n  methods: {\n    midiSubscription(pitch: number) {\n      const abc = TonalAbcNotation.scientificToAbcNotation(\n        Midi.midiToNoteName(pitch)\n      );\n      this.abc = `X:1\\nK:C\\n${abc}`;\n      (this.$refs.notes as HTMLElement).innerHTML += `${pitch} (${abc})<br />`;\n    }\n  }\n});\n","import { render } from \"./ShowPlay.vue?vue&type=template&id=f53e4994\"\nimport script from \"./ShowPlay.vue?vue&type=script&lang=ts\"\nexport * from \"./ShowPlay.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"challenge\">\n    <h1>{{ $i18n.t(\"game.noteReading.title\") }}</h1>\n    <div v-if=\"gaming\">\n      <p>{{ $i18n.t(\"game.noteReading.description\") }}</p>\n      <AnimatedAbcNotation\n        :abc=\"abc\"\n        :animationDuration=\"speed\"\n        :key=\"`heat_no_${heat}`\"\n      />\n      <span>{{ challenge.pitch }} ({{ challenge.note }})</span>\n      <br />\n      <span>{{ heat }}/{{ heats }}</span>\n      <br />\n      <span>\n        {{ $i18n.t(\"game.noteReading.analysis.successes\") }} {{ successes }},\n        {{ $i18n.t(\"game.noteReading.analysis.mistakes\") }} {{ mistakes }}\n      </span>\n      <br />\n      <button @click=\"finish()\">\n        {{ $i18n.t(\"game.noteReading.stop\") }}\n      </button>\n    </div>\n    <div v-else-if=\"finished\">\n      {{ $i18n.t(\"game.noteReading.finished\") }}<br />\n      {{ $i18n.t(\"game.noteReading.analysis.successes\") }} {{ successes }},\n      {{ $i18n.t(\"game.noteReading.analysis.mistakes\") }} {{ mistakes }}\n      <br />\n      <button @click=\"reset()\">\n        {{ $i18n.t(\"game.noteReading.reset\") }}\n      </button>\n    </div>\n    <div v-else>\n      <button @click=\"start()\">\n        {{ $i18n.t(\"game.noteReading.start\") }}\n      </button>\n      <p>\n        <sub>{{ startViaKeyHint }}</sub>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport AnimatedAbcNotation from \"./AnimatedAbcNotation.vue\";\nimport challengeGenerator, {\n  AccidentalsConfiguration,\n  Challenge\n} from \"@/challengeGenerator\";\nimport { VueI18n } from \"vue-i18n\";\nimport GameInfo from \"@/types/GameInfo\";\nimport Keyboard from \"@/input/Keyboard\";\nimport midiToAbc from \"@/midiToAbc\";\n\nexport const START_ON_KEY = 60; // middle C\n\nexport default defineComponent({\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    },\n    baseNote: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    noteLimit: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    speed: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    accidentals: {\n      required: true,\n      type: String\n    },\n    heats: {\n      default: 10,\n      type: Number\n    }\n  },\n  data: () => ({\n    gaming: false,\n    finished: false,\n    challenge: {} as Challenge,\n    mistakes: 0,\n    successes: 0,\n    timeout: undefined as number | undefined,\n    generator: undefined as Generator<Challenge> | undefined,\n    heat: 0\n  }),\n  components: {\n    AnimatedAbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.evaluateInput);\n  },\n  mounted() {\n    this.keyboard.addListener(this.evaluateInput);\n  },\n  computed: {\n    startViaKeyHint(): string {\n      return (this.$i18n as VueI18n).t(\"game.noteReading.startViaKeyHint\", {\n        key: `${START_ON_KEY} (${midiToAbc(START_ON_KEY)})`\n      });\n    },\n    abc(): string {\n      return `X:1\\nK:C\\n${this.challenge.note}`;\n    }\n  },\n  methods: {\n    reset() {\n      // @ts-ignore The 'this' context… is not assignable to method's 'this' - no idea how to make this work nicely\n      Object.assign(this.$data, this.$options.data!.apply(this));\n    },\n    start() {\n      this.reset();\n      this.gaming = true;\n      this.generator = challengeGenerator(\n        this.baseNote,\n        this.noteLimit,\n        AccidentalsConfiguration[\n          this.accidentals as keyof typeof AccidentalsConfiguration\n        ]\n      );\n      this.next();\n    },\n    finish() {\n      window.clearTimeout(this.timeout);\n      this.gaming = false;\n      this.finished = true;\n      this.$emit(\"finished\", {\n        heats: this.heats,\n        heat: this.heat,\n        successes: this.successes,\n        mistakes: this.mistakes\n      } as GameInfo);\n    },\n    next() {\n      if (!this.generator) {\n        throw new Error(\"Can only run after generator was set up\");\n      }\n      const challenge = this.generator.next();\n\n      if (challenge.done || this.heat >= this.heats) {\n        this.finish();\n        return;\n      }\n\n      this.challenge = challenge.value;\n\n      this.timeout = window.setTimeout(this.noResponse, this.speed);\n\n      this.heat++;\n    },\n    evaluateInput(midiPitch: number) {\n      if (this.gaming) {\n        this.evaluateResponse(midiPitch);\n      } else {\n        if (midiPitch === START_ON_KEY) {\n          if (this.finished) {\n            this.reset();\n          } else {\n            this.start();\n          }\n        }\n      }\n    },\n    noResponse() {\n      this.mistakes++;\n      this.next();\n    },\n    evaluateResponse(midiPitch: number) {\n      if (midiPitch === this.challenge.pitch) {\n        window.clearTimeout(this.timeout);\n        this.successes++;\n        this.next();\n      } else {\n        this.mistakes++;\n      }\n    }\n  },\n  emits: [\"finished\"]\n});\n</script>\n\n<style>\n.challenge {\n  height: 300px;\n}\n</style>\n","<template>\n  <AbcNotation\n    class=\"animated-abc-notation\"\n    :abc=\"abc\"\n    ref=\"abc\"\n    @rendered=\"postProcessAbc\"\n    :style=\"styleVariables\"\n  />\n</template>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport AbcNotation from \"./AbcNotation\";\n\nexport default defineComponent({\n  components: { AbcNotation },\n  props: {\n    abc: {\n      required: true,\n      type: String\n    },\n    animationDuration: {\n      required: true,\n      type: Number\n    }\n  },\n  data: () => ({\n    abcWidth: 0\n  }),\n  computed: {\n    styleVariables() {\n      return {\n        \"--staff-width\": this.abcWidth - 100 + \"px\",\n        \"--animation-duration\": this.animationDuration + \"ms\"\n      };\n    }\n  },\n  methods: {\n    postProcessAbc() {\n      this.abcWidth = this.$refs.abc.$el.children[0].clientWidth;\n\n      // remove \"margins\" from staff lines which happen to be part of the lines' path\n      this.$refs.abc.$el.querySelectorAll(\".abcjs-staff path\").forEach(el => {\n        const pathDefinition = el\n          .getAttribute(\"d\")\n          .replace(\"M 15 \", \"M 0 \")\n          .replace(\"L 15 \", \"L 0 \");\n        el.setAttribute(\"d\", pathDefinition);\n      });\n    }\n  }\n});\n</script>\n\n<style>\n.animated-abc-notation .abcjs-staff {\n  transform: scaleX(10);\n}\n\n/* that is notes and possibly their ledger lines */\n.animated-abc-notation .abcjs-note,\n.animated-abc-notation .abcjs-ledger {\n  animation-duration: var(--animation-duration);\n  animation-timing-function: linear;\n  animation-direction: normal;\n  animation-iteration-count: 1;\n  animation-fill-mode: forwards;\n  animation-name: inchacross;\n}\n\n@keyframes inchacross {\n  from {\n    transform: translateX(0);\n  }\n  to {\n    transform: translateX(var(--staff-width));\n  }\n}\n</style>\n","import { render } from \"./AnimatedAbcNotation.vue?vue&type=template&id=6877785e\"\nimport script from \"./AnimatedAbcNotation.vue?vue&type=script&lang=js\"\nexport * from \"./AnimatedAbcNotation.vue?vue&type=script&lang=js\"\n\nimport \"./AnimatedAbcNotation.vue?vue&type=style&index=0&id=6877785e&lang=css\"\nscript.render = render\n\nexport default script","export const KEYS_IN_OCTAVE = 12;\n\n// get this from a 3rd party. that'd be great\nexport const ACCIDENTAL_KEYS = [1, 3, 6, 8, 10];\n\nexport const MIDI_TOP_PITCH = 127;\n","import { ACCIDENTAL_KEYS, KEYS_IN_OCTAVE, MIDI_TOP_PITCH } from \"@/Foundations\";\n\nexport default function generatePitchOptions(\n  baseNote: number,\n  noteLimit: number,\n  avoidAccidentals: boolean\n): number[] {\n  const pitches = [];\n  let pitch = -1;\n  for (let octave = -1; octave <= 9; octave++) {\n    for (let note = 0; note < KEYS_IN_OCTAVE; note++) {\n      pitch++;\n\n      if (pitch > MIDI_TOP_PITCH || pitches.length >= noteLimit) {\n        return pitches;\n      }\n\n      if (pitch < baseNote) {\n        continue;\n      }\n      if (avoidAccidentals && ACCIDENTAL_KEYS.includes(note)) {\n        continue;\n      }\n\n      pitches.push(pitch);\n    }\n  }\n  return pitches;\n}\n","import TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport Midi from \"@tonaljs/midi\";\n\nexport default function midiToAbc(pitch: number, sharps: boolean = false) {\n  return TonalAbcNotation.scientificToAbcNotation(\n    Midi.midiToNoteName(pitch, { sharps })\n  );\n}\n","import generatePitchOptions from \"@/generatePitchOptions\";\nimport midiToAbc from \"@/midiToAbc\";\n\nexport enum AccidentalsConfiguration {\n  \"no\" = \"no\",\n  \"sharps\" = \"sharps\",\n  \"flats\" = \"flats\",\n  \"random\" = \"random\"\n}\n\nfunction getRandomValueFromArray<T>(array: T[]): T {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction repetitionIsAvoidable(noteLimit: number): boolean {\n  return noteLimit !== 1;\n}\n\nexport class Challenge {\n  constructor(readonly note: string, readonly pitch: number) {}\n}\n\nexport default function*(\n  baseNote: number,\n  noteLimit: number,\n  accidentals: AccidentalsConfiguration\n) {\n  const validPitches = generatePitchOptions(\n    baseNote,\n    noteLimit,\n    accidentals === \"no\"\n  );\n\n  let previous: Challenge | null = null;\n  while (true) {\n    let pitch: number;\n    do {\n      pitch = getRandomValueFromArray(validPitches);\n    } while (\n      previous &&\n      pitch === previous.pitch &&\n      repetitionIsAvoidable(noteLimit)\n    );\n\n    const note = midiToAbc(\n      pitch,\n      accidentals === \"sharps\" ||\n        (accidentals === \"random\" && Math.random() < 0.5)\n    );\n\n    const challenge: Challenge = new Challenge(note, pitch);\n\n    previous = challenge;\n\n    yield challenge;\n  }\n}\n","\nimport { defineComponent, PropType } from \"vue\";\nimport AnimatedAbcNotation from \"./AnimatedAbcNotation.vue\";\nimport challengeGenerator, {\n  AccidentalsConfiguration,\n  Challenge\n} from \"@/challengeGenerator\";\nimport { VueI18n } from \"vue-i18n\";\nimport GameInfo from \"@/types/GameInfo\";\nimport Keyboard from \"@/input/Keyboard\";\nimport midiToAbc from \"@/midiToAbc\";\n\nexport const START_ON_KEY = 60; // middle C\n\nexport default defineComponent({\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    },\n    baseNote: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    noteLimit: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    speed: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    accidentals: {\n      required: true,\n      type: String\n    },\n    heats: {\n      default: 10,\n      type: Number\n    }\n  },\n  data: () => ({\n    gaming: false,\n    finished: false,\n    challenge: {} as Challenge,\n    mistakes: 0,\n    successes: 0,\n    timeout: undefined as number | undefined,\n    generator: undefined as Generator<Challenge> | undefined,\n    heat: 0\n  }),\n  components: {\n    AnimatedAbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.evaluateInput);\n  },\n  mounted() {\n    this.keyboard.addListener(this.evaluateInput);\n  },\n  computed: {\n    startViaKeyHint(): string {\n      return (this.$i18n as VueI18n).t(\"game.noteReading.startViaKeyHint\", {\n        key: `${START_ON_KEY} (${midiToAbc(START_ON_KEY)})`\n      });\n    },\n    abc(): string {\n      return `X:1\\nK:C\\n${this.challenge.note}`;\n    }\n  },\n  methods: {\n    reset() {\n      // @ts-ignore The 'this' context… is not assignable to method's 'this' - no idea how to make this work nicely\n      Object.assign(this.$data, this.$options.data!.apply(this));\n    },\n    start() {\n      this.reset();\n      this.gaming = true;\n      this.generator = challengeGenerator(\n        this.baseNote,\n        this.noteLimit,\n        AccidentalsConfiguration[\n          this.accidentals as keyof typeof AccidentalsConfiguration\n        ]\n      );\n      this.next();\n    },\n    finish() {\n      window.clearTimeout(this.timeout);\n      this.gaming = false;\n      this.finished = true;\n      this.$emit(\"finished\", {\n        heats: this.heats,\n        heat: this.heat,\n        successes: this.successes,\n        mistakes: this.mistakes\n      } as GameInfo);\n    },\n    next() {\n      if (!this.generator) {\n        throw new Error(\"Can only run after generator was set up\");\n      }\n      const challenge = this.generator.next();\n\n      if (challenge.done || this.heat >= this.heats) {\n        this.finish();\n        return;\n      }\n\n      this.challenge = challenge.value;\n\n      this.timeout = window.setTimeout(this.noResponse, this.speed);\n\n      this.heat++;\n    },\n    evaluateInput(midiPitch: number) {\n      if (this.gaming) {\n        this.evaluateResponse(midiPitch);\n      } else {\n        if (midiPitch === START_ON_KEY) {\n          if (this.finished) {\n            this.reset();\n          } else {\n            this.start();\n          }\n        }\n      }\n    },\n    noResponse() {\n      this.mistakes++;\n      this.next();\n    },\n    evaluateResponse(midiPitch: number) {\n      if (midiPitch === this.challenge.pitch) {\n        window.clearTimeout(this.timeout);\n        this.successes++;\n        this.next();\n      } else {\n        this.mistakes++;\n      }\n    }\n  },\n  emits: [\"finished\"]\n});\n","import { render } from \"./Challenge.vue?vue&type=template&id=415f9abb\"\nimport script from \"./Challenge.vue?vue&type=script&lang=ts\"\nexport * from \"./Challenge.vue?vue&type=script&lang=ts\"\n\nimport \"./Challenge.vue?vue&type=style&index=0&id=415f9abb&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div v-if=\"loading\">\n    {{ $i18n.t(\"midi.loading\") }}\n  </div>\n  <slot v-else />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport WebMidi from \"webmidi\";\n\nexport default defineComponent({\n  name: \"OptionalMidiCapability\",\n  data: () => ({\n    loading: true\n  }),\n  unmounted() {\n    WebMidi.disable();\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      WebMidi.enable(error => {\n        this.loading = false;\n        if (!error) {\n          this.$emit(\"midiReady\");\n        }\n      }, false);\n    }\n  },\n  emits: [\"midiReady\", \"midiError\"]\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\nimport WebMidi from \"webmidi\";\n\nexport default defineComponent({\n  name: \"OptionalMidiCapability\",\n  data: () => ({\n    loading: true\n  }),\n  unmounted() {\n    WebMidi.disable();\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      WebMidi.enable(error => {\n        this.loading = false;\n        if (!error) {\n          this.$emit(\"midiReady\");\n        }\n      }, false);\n    }\n  },\n  emits: [\"midiReady\", \"midiError\"]\n});\n","import { render } from \"./OptionalMidiCapability.vue?vue&type=template&id=47a33c2d\"\nimport script from \"./OptionalMidiCapability.vue?vue&type=script&lang=ts\"\nexport * from \"./OptionalMidiCapability.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <MidiDeviceSelector :preferred=\"preferred\" @deviceChanged=\"deviceChanged\" />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport MidiDeviceSelector from \"./MidiDeviceSelector.vue\";\nimport { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"SubscriptionHandlingDeviceSelector\",\n  components: {\n    MidiDeviceSelector\n  },\n  props: {\n    deviceId: {\n      required: false,\n      type: String\n    }\n  },\n  data: () => ({\n    preferred: \"\"\n  }),\n  created() {\n    if (this.deviceId) {\n      this.preferred = this.deviceId;\n    }\n  },\n  methods: {\n    deviceChanged(current: Input, previous: Input | null) {\n      // remove subscriptions from previous device\n      if (previous && typeof previous.removeListener === \"function\") {\n        previous.removeListener();\n      }\n\n      this.$emit(\"deviceChanged\", current, previous);\n    }\n  },\n  emits: [\"deviceChanged\"]\n});\n</script>\n","<template>\n  <div>\n    <label for=\"jaslmus-settings-midi-device\">\n      {{ $i18n.t(\"midiOptions.input.device.title\") }}\n    </label>\n    <select id=\"jaslmus-settings-midi-device\" v-model=\"selected\">\n      <option disabled value=\"\">\n        {{ $i18n.t(\"midiOptions.input.device.placeholder\") }}\n      </option>\n      <option\n        v-for=\"option in inputs\"\n        v-bind:value=\"option.id\"\n        v-bind:key=\"option.id\"\n      >\n        {{ option.name }} ({{ option.manufacturer }})\n      </option>\n    </select>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport WebMidi, { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"MidiDeviceSelector\",\n  props: {\n    preferred: {\n      required: false,\n      type: String,\n      default: \"\"\n    }\n  },\n  data(): { selected: string; inputs: Input[] } {\n    return {\n      selected: WebMidi.getInputById(this.preferred) ? this.preferred : \"\",\n      inputs: []\n    };\n  },\n  watch: {\n    selected(current, previous) {\n      this.$emit(\n        \"deviceChanged\",\n        WebMidi.getInputById(current) || null,\n        WebMidi.getInputById(previous) || null\n      );\n    }\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      throw new Error(\"WebMidi must be enabled for this component to work!\");\n    }\n\n    this.inputs = WebMidi.inputs;\n  },\n  emits: [\"deviceChanged\"]\n});\n</script>\n\n<style></style>\n","\nimport { defineComponent } from \"vue\";\nimport WebMidi, { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"MidiDeviceSelector\",\n  props: {\n    preferred: {\n      required: false,\n      type: String,\n      default: \"\"\n    }\n  },\n  data(): { selected: string; inputs: Input[] } {\n    return {\n      selected: WebMidi.getInputById(this.preferred) ? this.preferred : \"\",\n      inputs: []\n    };\n  },\n  watch: {\n    selected(current, previous) {\n      this.$emit(\n        \"deviceChanged\",\n        WebMidi.getInputById(current) || null,\n        WebMidi.getInputById(previous) || null\n      );\n    }\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      throw new Error(\"WebMidi must be enabled for this component to work!\");\n    }\n\n    this.inputs = WebMidi.inputs;\n  },\n  emits: [\"deviceChanged\"]\n});\n","import { render } from \"./MidiDeviceSelector.vue?vue&type=template&id=771169cc\"\nimport script from \"./MidiDeviceSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./MidiDeviceSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport MidiDeviceSelector from \"./MidiDeviceSelector.vue\";\nimport { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"SubscriptionHandlingDeviceSelector\",\n  components: {\n    MidiDeviceSelector\n  },\n  props: {\n    deviceId: {\n      required: false,\n      type: String\n    }\n  },\n  data: () => ({\n    preferred: \"\"\n  }),\n  created() {\n    if (this.deviceId) {\n      this.preferred = this.deviceId;\n    }\n  },\n  methods: {\n    deviceChanged(current: Input, previous: Input | null) {\n      // remove subscriptions from previous device\n      if (previous && typeof previous.removeListener === \"function\") {\n        previous.removeListener();\n      }\n\n      this.$emit(\"deviceChanged\", current, previous);\n    }\n  },\n  emits: [\"deviceChanged\"]\n});\n","import { render } from \"./SubscriptionHandlingDeviceSelector.vue?vue&type=template&id=53b35b38\"\nimport script from \"./SubscriptionHandlingDeviceSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./SubscriptionHandlingDeviceSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <h2>{{ $i18n.t(\"preferences.title\") }}</h2>\n    <Fieldset :legend=\"$i18n.t('preferences.keyboardSettings.title')\">\n      <SchemaBasedForm\n        :schema=\"schema.keyboardSettings\"\n        :user-data=\"preferences.keyboardSettings\"\n        i18n-prefix=\"preferences.keyboardSettings\"\n        @updated=\"preferencesUpdated('keyboardSettings', $event)\"\n      />\n    </Fieldset>\n    <Fieldset :legend=\"$i18n.t('preferences.noteReading.title')\">\n      <SchemaBasedForm\n        :schema=\"schema.noteReading\"\n        :user-data=\"preferences.noteReading\"\n        i18n-prefix=\"preferences.noteReading\"\n        @updated=\"preferencesUpdated('noteReading', $event)\"\n      />\n    </Fieldset>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Fieldset from \"primevue/fieldset\";\nimport SchemaBasedForm from \"@/components/SchemaBasedForm.vue\";\nimport preferencesSchema from \"@/preferences.schema.json\";\n\nexport default defineComponent({\n  components: {\n    SchemaBasedForm,\n    Fieldset\n  },\n  props: {\n    preferences: Object\n  },\n  data() {\n    return {\n      schema: preferencesSchema\n    };\n  },\n  emits: [\"updated\"],\n  methods: {\n    preferencesUpdated(key: string, preferences: Record<string, any>): void {\n      this.$emit(\"updated\", {\n        ...this.preferences,\n        [key]: preferences\n      });\n    }\n  }\n});\n</script>\n","<template>\n  <SchemaForm\n    :schema=\"augmentedSchema\"\n    @update:modelValue=\"$emit('updated', $event)\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, markRaw, toRefs } from \"vue\";\nimport { SchemaFormFactory, useSchemaForm } from \"formvuelate\";\nimport { VueI18n } from \"vue-i18n\";\nimport FormDropdown from \"@/components/form/FormDropdown.vue\";\n\nmarkRaw(FormDropdown);\n\ninterface OurSchema extends Record<string, OurSchemaProp> {}\n\ninterface OurSchemaProp {\n  component: string;\n  options?: OurSchemaOption[];\n  [key: string]: any;\n}\n\ninterface OurSchemaOption {\n  id: string;\n  value: string;\n  label?: string;\n}\n\ninterface FormvuelateSchema extends Record<string, FormvuelateSchemaProp> {}\n\ninterface FormvuelateSchemaOption {\n  label: string;\n  value: string;\n}\n\ninterface FormvuelateSchemaProp {\n  component: string;\n  label: string;\n  placeholder?: string;\n  options?: FormvuelateSchemaOption[];\n  [key: string]: any;\n}\n\nexport default defineComponent({\n  props: {\n    schema: {\n      required: true,\n      type: Object as PropType<OurSchema>\n    },\n    userData: {\n      required: true,\n      type: Object\n    },\n    i18nPrefix: {\n      required: true,\n      type: String\n    }\n  },\n  computed: {\n    augmentedSchema(): FormvuelateSchema {\n      return this.augmentSchema(\n        this.schema,\n        this.$i18n as VueI18n,\n        this.i18nPrefix\n      );\n    }\n  },\n  components: {\n    SchemaForm: SchemaFormFactory([], { FormDropdown })\n  },\n  emits: [\"updated\"],\n  methods: {\n    augmentSchema(\n      schema: OurSchema,\n      $i18n: VueI18n,\n      i18nPrefix: string\n    ): FormvuelateSchema {\n      const fields: FormvuelateSchema = {};\n\n      Object.keys(schema).forEach(prop => {\n        const settings = schema[prop];\n\n        const options: FormvuelateSchemaOption[] = [];\n        if (settings.options) {\n          settings.options.forEach(option => {\n            let label;\n            if (option.label) {\n              label = option.label;\n            } else {\n              label = $i18n.t(`${i18nPrefix}.${prop}.options.${option.id}`);\n            }\n            options.push({\n              label,\n              value: option.value\n            });\n          });\n        }\n\n        const placeholderMessage = `${i18nPrefix}.${prop}.placeholder`;\n\n        fields[prop] = {\n          ...settings,\n          label: $i18n.t(`${i18nPrefix}.${prop}.label`),\n          placeholder: $i18n.te(placeholderMessage)\n            ? $i18n.t(placeholderMessage)\n            : undefined,\n          options: options.length ? options : undefined\n        };\n      });\n\n      return fields;\n    }\n  },\n  setup(props) {\n    const { userData } = toRefs(props);\n    useSchemaForm(userData);\n  }\n});\n</script>\n","<template>\n  <span class=\"p-float-label\">\n    <label :for=\"uuid\">{{ label }}</label>\n    <Dropdown\n      :modelValue=\"modelValue\"\n      :options=\"options\"\n      optionLabel=\"label\"\n      optionValue=\"value\"\n      :placeholder=\"placeholder\"\n      :id=\"uuid\"\n      @change=\"$emit('update:modelValue', $event.value)\"\n    />\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Dropdown from \"primevue/dropdown\";\n\nexport default defineComponent({\n  components: {\n    Dropdown\n  },\n  props: {\n    modelValue: { required: true },\n    label: {\n      type: String,\n      required: true\n    },\n    options: {\n      type: Array,\n      required: true\n    },\n    uuid: {\n      type: Number,\n      default: 0\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:modelValue\"]\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\nimport Dropdown from \"primevue/dropdown\";\n\nexport default defineComponent({\n  components: {\n    Dropdown\n  },\n  props: {\n    modelValue: { required: true },\n    label: {\n      type: String,\n      required: true\n    },\n    options: {\n      type: Array,\n      required: true\n    },\n    uuid: {\n      type: Number,\n      default: 0\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:modelValue\"]\n});\n","import { render } from \"./FormDropdown.vue?vue&type=template&id=13640a67\"\nimport script from \"./FormDropdown.vue?vue&type=script&lang=ts\"\nexport * from \"./FormDropdown.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, PropType, markRaw, toRefs } from \"vue\";\nimport { SchemaFormFactory, useSchemaForm } from \"formvuelate\";\nimport { VueI18n } from \"vue-i18n\";\nimport FormDropdown from \"@/components/form/FormDropdown.vue\";\n\nmarkRaw(FormDropdown);\n\ninterface OurSchema extends Record<string, OurSchemaProp> {}\n\ninterface OurSchemaProp {\n  component: string;\n  options?: OurSchemaOption[];\n  [key: string]: any;\n}\n\ninterface OurSchemaOption {\n  id: string;\n  value: string;\n  label?: string;\n}\n\ninterface FormvuelateSchema extends Record<string, FormvuelateSchemaProp> {}\n\ninterface FormvuelateSchemaOption {\n  label: string;\n  value: string;\n}\n\ninterface FormvuelateSchemaProp {\n  component: string;\n  label: string;\n  placeholder?: string;\n  options?: FormvuelateSchemaOption[];\n  [key: string]: any;\n}\n\nexport default defineComponent({\n  props: {\n    schema: {\n      required: true,\n      type: Object as PropType<OurSchema>\n    },\n    userData: {\n      required: true,\n      type: Object\n    },\n    i18nPrefix: {\n      required: true,\n      type: String\n    }\n  },\n  computed: {\n    augmentedSchema(): FormvuelateSchema {\n      return this.augmentSchema(\n        this.schema,\n        this.$i18n as VueI18n,\n        this.i18nPrefix\n      );\n    }\n  },\n  components: {\n    SchemaForm: SchemaFormFactory([], { FormDropdown })\n  },\n  emits: [\"updated\"],\n  methods: {\n    augmentSchema(\n      schema: OurSchema,\n      $i18n: VueI18n,\n      i18nPrefix: string\n    ): FormvuelateSchema {\n      const fields: FormvuelateSchema = {};\n\n      Object.keys(schema).forEach(prop => {\n        const settings = schema[prop];\n\n        const options: FormvuelateSchemaOption[] = [];\n        if (settings.options) {\n          settings.options.forEach(option => {\n            let label;\n            if (option.label) {\n              label = option.label;\n            } else {\n              label = $i18n.t(`${i18nPrefix}.${prop}.options.${option.id}`);\n            }\n            options.push({\n              label,\n              value: option.value\n            });\n          });\n        }\n\n        const placeholderMessage = `${i18nPrefix}.${prop}.placeholder`;\n\n        fields[prop] = {\n          ...settings,\n          label: $i18n.t(`${i18nPrefix}.${prop}.label`),\n          placeholder: $i18n.te(placeholderMessage)\n            ? $i18n.t(placeholderMessage)\n            : undefined,\n          options: options.length ? options : undefined\n        };\n      });\n\n      return fields;\n    }\n  },\n  setup(props) {\n    const { userData } = toRefs(props);\n    useSchemaForm(userData);\n  }\n});\n","import { render } from \"./SchemaBasedForm.vue?vue&type=template&id=45924354\"\nimport script from \"./SchemaBasedForm.vue?vue&type=script&lang=ts\"\nexport * from \"./SchemaBasedForm.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport Fieldset from \"primevue/fieldset\";\nimport SchemaBasedForm from \"@/components/SchemaBasedForm.vue\";\nimport preferencesSchema from \"@/preferences.schema.json\";\n\nexport default defineComponent({\n  components: {\n    SchemaBasedForm,\n    Fieldset\n  },\n  props: {\n    preferences: Object\n  },\n  data() {\n    return {\n      schema: preferencesSchema\n    };\n  },\n  emits: [\"updated\"],\n  methods: {\n    preferencesUpdated(key: string, preferences: Record<string, any>): void {\n      this.$emit(\"updated\", {\n        ...this.preferences,\n        [key]: preferences\n      });\n    }\n  }\n});\n","import { render } from \"./Preferences.vue?vue&type=template&id=13f9f2f8\"\nimport script from \"./Preferences.vue?vue&type=script&lang=ts\"\nexport * from \"./Preferences.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { ref, watch, Ref } from \"vue\";\n\nexport default function storedData<T extends any>(\n  name: string,\n  version: string,\n  defaultValue: T\n): Ref<T> {\n  function buildKey() {\n    return `storedData_${name}_${version}`;\n  }\n\n  const storeValueJSON = window.localStorage.getItem(buildKey());\n  const watchedValue = ref(\n    storeValueJSON ? JSON.parse(storeValueJSON) : defaultValue\n  );\n\n  watch(\n    watchedValue,\n    (newValue: any) => {\n      window.localStorage.setItem(buildKey(), JSON.stringify(newValue));\n    },\n    { deep: true }\n  );\n\n  return watchedValue;\n}\n","<template>\n  <div>\n    <span>{{ $i18n.t(\"scoreBoard.games\") }} {{ games.length }}</span>\n    &mdash;\n    <span>\n      {{ $i18n.t(\"scoreBoard.virtuosicScore\") }}\n      <span v-if=\"games.length\"> {{ Math.round(virtuosicScore * 100) }}% </span>\n      <span v-else>\n        {{ $i18n.t(\"scoreBoard.noVirtuosicScore\") }}\n      </span>\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport GameResult from \"@/types/GameResult\";\n\nexport default defineComponent({\n  props: {\n    games: {\n      required: true,\n      type: Array as PropType<GameResult[]>\n    }\n  },\n  computed: {\n    virtuosicScore(): number {\n      let successes = 0,\n        heats = 0;\n      this.games.forEach(game => {\n        successes += Math.max(\n          game.gameInfo.successes - game.gameInfo.mistakes,\n          1\n        );\n        heats += game.gameInfo.heats;\n      });\n      if (heats === 0) {\n        return 0;\n      }\n      return successes / heats;\n    }\n  }\n});\n</script>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport GameResult from \"@/types/GameResult\";\n\nexport default defineComponent({\n  props: {\n    games: {\n      required: true,\n      type: Array as PropType<GameResult[]>\n    }\n  },\n  computed: {\n    virtuosicScore(): number {\n      let successes = 0,\n        heats = 0;\n      this.games.forEach(game => {\n        successes += Math.max(\n          game.gameInfo.successes - game.gameInfo.mistakes,\n          1\n        );\n        heats += game.gameInfo.heats;\n      });\n      if (heats === 0) {\n        return 0;\n      }\n      return successes / heats;\n    }\n  }\n});\n","import { render } from \"./ScoreBoard.vue?vue&type=template&id=cacc84fc\"\nimport script from \"./ScoreBoard.vue?vue&type=script&lang=ts\"\nexport * from \"./ScoreBoard.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { Input, InputEventNoteon } from \"webmidi\";\nimport Keyboard, { KeyboardListener } from \"./Keyboard\";\n\nexport default class WebmidiInputKeyboardAdapter implements Keyboard {\n  private listeners: KeyboardListener[] = [];\n  private readonly dispatcher: (midiEvent: InputEventNoteon) => void;\n\n  constructor(readonly input: Input) {\n    this.dispatcher = (midiEvent: InputEventNoteon) => {\n      this.listeners.forEach(listener => listener(midiEvent.data[1]));\n    };\n  }\n\n  addListener(listener: KeyboardListener): this {\n    this.listeners.push(listener);\n    if (this.listeners.length === 1) {\n      this.input.addListener(\"noteon\", \"all\", this.dispatcher);\n    }\n    return this;\n  }\n\n  removeListener(listener?: KeyboardListener): this {\n    if (listener) {\n      const index = this.listeners.indexOf(listener);\n      if (index !== -1) {\n        this.listeners.splice(index, 1);\n      }\n    } else {\n      this.listeners = [];\n    }\n    if (this.listeners.length === 0) {\n      this.input.removeListener(\"noteon\", \"all\", this.dispatcher);\n    }\n    return this;\n  }\n}\n","<template>\n  <div ref=\"keyboard\"></div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport { Instrument, INoteValue as PianoChartNote, Note } from \"piano-chart\";\nimport { note } from \"@tonaljs/core\";\nimport { KEYS_IN_OCTAVE } from \"@/Foundations\";\n\ninterface Settings {\n  keys: number;\n}\n\nexport default defineComponent({\n  props: {\n    settings: {\n      required: true,\n      type: Object as PropType<Settings>\n    },\n    highlightedNotes: {\n      required: false,\n      default: []\n    }\n  },\n  computed: {\n    octaves(): number {\n      return Math.ceil(this.settings.keys / KEYS_IN_OCTAVE);\n    },\n    startNote(): string {\n      const rest = this.settings.keys % KEYS_IN_OCTAVE;\n      if (this.octaves > 7 && rest > 0) {\n        return \"A\";\n      }\n      return \"C\";\n    },\n    startOctave(): number {\n      return 4 - Math.floor(this.octaves / 2);\n    },\n    endOctave(): number {\n      return 4 + Math.floor(this.octaves / 2);\n    }\n  },\n  watch: {\n    settings() {\n      this.render();\n    }\n  },\n  data: () => ({\n    piano: (null as unknown) as Instrument\n  }),\n  unmounted() {\n    this.piano.destroy();\n  },\n  mounted() {\n    this.render();\n  },\n  methods: {\n    keyPlay(pianoChartNote: PianoChartNote) {\n      // .toString() is cleanly implemented on NoteValue, not necessarily on INoteValue - hmm…\n      const midiPitch = note(pianoChartNote.toString()).midi;\n      // we just swallow keys outside of midi range here - hmm…\n      if (midiPitch) {\n        this.$emit(\"noteon\", midiPitch);\n      }\n    },\n    render() {\n      this.piano = new Instrument(this.$refs.keyboard as HTMLElement, {\n        startOctave: this.startOctave,\n        startNote: this.startNote as Note,\n        endOctave: this.endOctave,\n        highlightedNotes: this.highlightedNotes\n      });\n      this.piano.create();\n      this.piano.addKeyMouseUpListener(this.piano.keyUp);\n      this.piano.addKeyMouseDownListener(note => {\n        this.piano.keyDown(note);\n        this.keyPlay(note);\n      });\n    }\n  },\n  emits: [\"noteon\"]\n});\n</script>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport { Instrument, INoteValue as PianoChartNote, Note } from \"piano-chart\";\nimport { note } from \"@tonaljs/core\";\nimport { KEYS_IN_OCTAVE } from \"@/Foundations\";\n\ninterface Settings {\n  keys: number;\n}\n\nexport default defineComponent({\n  props: {\n    settings: {\n      required: true,\n      type: Object as PropType<Settings>\n    },\n    highlightedNotes: {\n      required: false,\n      default: []\n    }\n  },\n  computed: {\n    octaves(): number {\n      return Math.ceil(this.settings.keys / KEYS_IN_OCTAVE);\n    },\n    startNote(): string {\n      const rest = this.settings.keys % KEYS_IN_OCTAVE;\n      if (this.octaves > 7 && rest > 0) {\n        return \"A\";\n      }\n      return \"C\";\n    },\n    startOctave(): number {\n      return 4 - Math.floor(this.octaves / 2);\n    },\n    endOctave(): number {\n      return 4 + Math.floor(this.octaves / 2);\n    }\n  },\n  watch: {\n    settings() {\n      this.render();\n    }\n  },\n  data: () => ({\n    piano: (null as unknown) as Instrument\n  }),\n  unmounted() {\n    this.piano.destroy();\n  },\n  mounted() {\n    this.render();\n  },\n  methods: {\n    keyPlay(pianoChartNote: PianoChartNote) {\n      // .toString() is cleanly implemented on NoteValue, not necessarily on INoteValue - hmm…\n      const midiPitch = note(pianoChartNote.toString()).midi;\n      // we just swallow keys outside of midi range here - hmm…\n      if (midiPitch) {\n        this.$emit(\"noteon\", midiPitch);\n      }\n    },\n    render() {\n      this.piano = new Instrument(this.$refs.keyboard as HTMLElement, {\n        startOctave: this.startOctave,\n        startNote: this.startNote as Note,\n        endOctave: this.endOctave,\n        highlightedNotes: this.highlightedNotes\n      });\n      this.piano.create();\n      this.piano.addKeyMouseUpListener(this.piano.keyUp);\n      this.piano.addKeyMouseDownListener(note => {\n        this.piano.keyDown(note);\n        this.keyPlay(note);\n      });\n    }\n  },\n  emits: [\"noteon\"]\n});\n","import { render } from \"./VirtualKeyboard.vue?vue&type=template&id=73d014fc\"\nimport script from \"./VirtualKeyboard.vue?vue&type=script&lang=ts\"\nexport * from \"./VirtualKeyboard.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import Keyboard, { KeyboardListener } from \"./Keyboard\";\n\nexport default class VirtualKeyboardEventObserver implements Keyboard {\n  private listeners: KeyboardListener[] = [];\n\n  addListener(listener: KeyboardListener): this {\n    this.listeners.push(listener);\n    return this;\n  }\n\n  removeListener(specificListener?: KeyboardListener): this {\n    if (specificListener) {\n      const index = this.listeners.indexOf(specificListener);\n      if (index !== -1) {\n        this.listeners.splice(index, 1);\n      }\n    } else {\n      this.listeners = [];\n    }\n    return this;\n  }\n\n  broadcast(midiPitch: number): void {\n    this.listeners.forEach(listener => listener(midiPitch));\n  }\n}\n","import Keyboard, { KeyboardListener } from \"./Keyboard\";\n\nexport default class DispatchingKeyboard implements Keyboard {\n  constructor(private readonly keyboards: Keyboard[]) {}\n\n  addListener(listener: KeyboardListener): this {\n    this.keyboards.forEach(keyboard => keyboard.addListener(listener));\n    return this;\n  }\n\n  removeListener(listener?: KeyboardListener): this {\n    this.keyboards.forEach(keyboard => keyboard.removeListener(listener));\n    return this;\n  }\n}\n","\nimport { defineComponent } from \"vue\";\nimport ShowPlay from \"./components/ShowPlay.vue\";\nimport Challenge from \"./components/Challenge.vue\";\nimport OptionalMidiCapability from \"./components/OptionalMidiCapability.vue\";\nimport SubscriptionHandlingDeviceSelector from \"./components/SubscriptionHandlingDeviceSelector.vue\";\nimport Preferences from \"@/components/Preferences.vue\";\nimport WebMidi, { Input } from \"webmidi\";\nimport storedData from \"@/storedData\";\nimport midiOptionsDefaults from \"./midiOptions.defaults.json\";\nimport preferencesDefaults from \"./preferences.defaults.json\";\nimport ScoreBoard from \"@/components/ScoreBoard.vue\";\nimport GameInfo from \"@/types/GameInfo\";\nimport GameResult from \"@/types/GameResult\";\nimport WebmidiInputKeyboardAdapter from \"@/input/WebmidiInputKeyboardAdapter\";\nimport Keyboard from \"@/input/Keyboard\";\nimport VirtualKeyboard from \"@/components/VirtualKeyboard.vue\";\nimport VirtualKeyboardEventObserver from \"@/input/VirtualKeyboardEventObserver\";\nimport DispatchingKeyboard from \"@/input/DispatchingKeyboard\";\n\nexport default defineComponent({\n  name: \"App\",\n  data: () => ({\n    hasMidiSupport: false,\n    showMidiOptions: false,\n    showPreferences: false,\n    midiInput: null as Keyboard | null,\n    virtualKeyboard: new VirtualKeyboardEventObserver()\n  }),\n  components: {\n    SubscriptionHandlingDeviceSelector,\n    OptionalMidiCapability,\n    Challenge,\n    ShowPlay,\n    Preferences,\n    ScoreBoard,\n    VirtualKeyboard\n  },\n  computed: {\n    keyboard(): Keyboard {\n      const keyboards: Keyboard[] = [this.virtualKeyboard];\n      if (this.midiInput) {\n        keyboards.push(this.midiInput);\n      }\n      return new DispatchingKeyboard(keyboards);\n    }\n  },\n  setup() {\n    return {\n      midiOptions: storedData(\n        \"midiOptions\",\n        midiOptionsDefaults.version.toString(),\n        midiOptionsDefaults.defaults\n      ),\n      preferences: storedData(\n        \"preferences\",\n        preferencesDefaults.version.toString(),\n        preferencesDefaults.defaults\n      ),\n      games: storedData(\"games\", \"1\", [] as GameResult[])\n    };\n  },\n  methods: {\n    deviceChanged(current: Input) {\n      this.midiOptions.input = current.id;\n      this.midiInput = this.wrapMidiInput(current);\n    },\n    midiReady() {\n      this.hasMidiSupport = true;\n      if (this.midiOptions.input) {\n        const webmidiInput = WebMidi.getInputById(this.midiOptions.input);\n        this.midiInput = webmidiInput ? this.wrapMidiInput(webmidiInput) : null;\n      }\n      this.showMidiOptions = !this.midiInput;\n    },\n    gameFinished(gameInfo: GameInfo) {\n      this.games.push({\n        name: \"noteReading\",\n        time: new Date().toISOString(),\n        preferences: this.preferences.noteReading,\n        gameInfo\n      } as GameResult);\n    },\n    wrapMidiInput(input: Input) {\n      return new WebmidiInputKeyboardAdapter(input);\n    }\n  }\n});\n","import { render } from \"./App.vue?vue&type=template&id=476e0eb4\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=476e0eb4&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport { createI18n } from \"vue-i18n\";\nimport englishI18n from \"../i18n/en.json\";\n\nimport PrimeVue from \"primevue/config\";\nimport \"primevue/resources/themes/saga-blue/theme.css\";\nimport \"primevue/resources/primevue.min.css\";\nimport \"primeicons/primeicons.css\";\n\nconst i18n = createI18n({\n  locale: \"en\",\n  messages: {\n    en: englishI18n\n  }\n});\n\ncreateApp(App)\n  .use(i18n)\n  .use(PrimeVue)\n  .mount(\"#app\");\n"],"sourceRoot":""}