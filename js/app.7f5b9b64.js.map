{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?6936","webpack:///./src/components/AnimatedAbcNotation.vue?ee83","webpack:///./src/App.vue","webpack:///./src/components/ShowPlay.vue","webpack:///./src/components/AbcNotation.vue","webpack:///./src/components/AbcNotation.vue?0a36","webpack:///./src/components/AbcNotation.vue?c01e","webpack:///./src/components/ShowPlay.vue?13d7","webpack:///./src/components/ShowPlay.vue?c0ab","webpack:///./src/components/Challenge.vue","webpack:///./src/components/AnimatedAbcNotation.vue","webpack:///./src/components/AnimatedAbcNotation.vue?760d","webpack:///./src/challengeGenerator.ts","webpack:///./src/components/Challenge.vue?0562","webpack:///./src/components/Challenge.vue?a556","webpack:///./src/components/MidiCapability.vue","webpack:///./src/components/MidiCapability.vue?5fa4","webpack:///./src/components/MidiCapability.vue?4004","webpack:///./src/components/SubscriptionHandlingDeviceSelector.vue","webpack:///./src/components/MidiDeviceSelector.vue","webpack:///./src/components/MidiDeviceSelector.vue?0d28","webpack:///./src/components/MidiDeviceSelector.vue?76af","webpack:///./src/components/SubscriptionHandlingDeviceSelector.vue?90b9","webpack:///./src/components/SubscriptionHandlingDeviceSelector.vue?7442","webpack:///./src/components/Preferences.vue","webpack:///./src/components/SchemaBasedForm.vue","webpack:///./src/components/form/FormDropdown.vue","webpack:///./src/components/form/FormDropdown.vue?9d90","webpack:///./src/components/form/FormDropdown.vue?ac95","webpack:///./src/components/SchemaBasedForm.vue?5104","webpack:///./src/components/SchemaBasedForm.vue?bd9f","webpack:///./src/components/Preferences.vue?40c6","webpack:///./src/storedData.ts","webpack:///./src/components/ScoreBoard.vue","webpack:///./src/components/ScoreBoard.vue?5672","webpack:///./src/components/ScoreBoard.vue?f3ff","webpack:///./src/WebmidiInputKeyboardAdapter.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","$i18n","midiReady","showMidiOptions","deviceId","midiOptions","input","deviceChanged","hasKeyboard","keyboard","midiInput","showPreferences","preferences","$event","games","base-note","noteReading","baseNote","note-limit","noteLimit","speed","accidentals","gameFinished","ref","abc","props","required","type","String","watch","this","render","mounted","methods","renderAbc","$refs","notation","add_classes","$emit","emits","components","AbcNotation","unmounted","removeListener","midiSubscription","addListener","pitch","scientificToAbcNotation","midiToNoteName","notes","innerHTML","gaming","animationDuration","heat","challenge","note","heats","successes","mistakes","finish","finished","reset","start","startViaKeyHint","class","postProcessAbc","style","styleVariables","Number","abcWidth","computed","$el","children","clientWidth","querySelectorAll","forEach","el","pathDefinition","getAttribute","replace","setAttribute","AccidentalsConfiguration","MIDI_TOP_PITCH","KEYS_IN_OCTAVE","accidentalKeys","generatePitchOptions","avoidAccidentals","pitches","octave","includes","getRandomValueFromArray","array","Math","floor","random","repetitionIsAvoidable","sharps","validPitches","previous","START_ON_KEY","validator","isInteger","default","timeout","undefined","generator","AnimatedAbcNotation","evaluateInput","midiToAbc","assign","$data","$options","next","clearTimeout","Error","done","setTimeout","noResponse","midiPitch","evaluateResponse","href","target","loading","error","keypath","tag","for","$t","disable","created","enabled","enable","err","preferred","disabled","id","selected","inputs","option","manufacturer","getInputById","current","MidiDeviceSelector","legend","schema","form-data","i18n-prefix","updated","augmentedSchema","modelValue","formData","uuid","label","options","optionLabel","optionValue","placeholder","Dropdown","Array","FormDropdown","i18nPrefix","augmentSchema","SchemaForm","fields","keys","prop","settings","placeholderMessage","component","te","SchemaBasedForm","Fieldset","noteReadingPreferences","storedData","version","defaultValue","buildKey","storeValueJSON","localStorage","getItem","watchedValue","JSON","parse","newValue","setItem","stringify","deep","round","virtuosicScore","game","max","gameInfo","listeners","dispatcher","midiEvent","listener","index","indexOf","SubscriptionHandlingDeviceSelector","MidiCapability","Challenge","ShowPlay","Preferences","ScoreBoard","setup","toString","defaults","wrapMidiInput","webmidiInput","time","Date","toISOString","i18n","locale","messages","en","App","use","mount"],"mappings":"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","file":"js/app.7f5b9b64.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=382f343e&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AnimatedAbcNotation.vue?vue&type=style&index=0&id=15a9cd8e&lang=css\"","<template>\n  <h1>{{ $i18n.t(\"header.title\") }}</h1>\n  <p>{{ $i18n.t(\"header.punchline\") }}</p>\n  <hr />\n  <MidiCapability @midiReady=\"midiReady\">\n    <div v-if=\"showMidiOptions\">\n      <button @click=\"showMidiOptions = false\">\n        {{ $i18n.t(\"midiOptions.close\") }}\n      </button>\n      <h2>{{ $i18n.t(\"midiOptions.title\") }}</h2>\n      <fieldset>\n        <legend>{{ $i18n.t(\"midiOptions.input.title\") }}</legend>\n        <SubscriptionHandlingDeviceSelector\n          :deviceId=\"midiOptions.input\"\n          @deviceChanged=\"deviceChanged\"\n        />\n        <div v-if=\"hasKeyboard\">\n          <h3>{{ $i18n.t(\"midiOptions.input.preview.title\") }}</h3>\n          <p>{{ $i18n.t(\"midiOptions.input.preview.description\") }}</p>\n          <ShowPlay :keyboard=\"midiInput\" />\n        </div>\n      </fieldset>\n    </div>\n    <div v-else-if=\"showPreferences\">\n      <button @click=\"showPreferences = false\">\n        {{ $i18n.t(\"preferences.close\") }}\n      </button>\n      <Preferences :preferences=\"preferences\" @updated=\"preferences = $event\" />\n    </div>\n    <div v-else>\n      <button @click=\"showMidiOptions = true\">\n        {{ $i18n.t(\"midiOptions.title\") }}\n      </button>\n      <button @click=\"showPreferences = true\">\n        {{ $i18n.t(\"preferences.title\") }}\n      </button>\n      <hr />\n      <ScoreBoard :games=\"games\" />\n      <hr />\n      <div v-if=\"hasKeyboard\">\n        <Challenge\n          v-if=\"hasKeyboard\"\n          :keyboard=\"midiInput\"\n          :base-note=\"preferences.noteReading.baseNote\"\n          :note-limit=\"preferences.noteReading.noteLimit\"\n          :speed=\"preferences.noteReading.speed\"\n          :accidentals=\"preferences.noteReading.accidentals\"\n          @finished=\"gameFinished\"\n        />\n      </div>\n      <div v-else>\n        {{ $i18n.t(\"error.noMidiDevice\") }}\n      </div>\n    </div>\n  </MidiCapability>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport ShowPlay from \"./components/ShowPlay.vue\";\nimport Challenge from \"./components/Challenge.vue\";\nimport MidiCapability from \"./components/MidiCapability.vue\";\nimport SubscriptionHandlingDeviceSelector from \"./components/SubscriptionHandlingDeviceSelector.vue\";\nimport Preferences from \"@/components/Preferences.vue\";\nimport WebMidi, { Input } from \"webmidi\";\nimport storedData from \"@/storedData\";\nimport midiOptionsDefaults from \"./midiOptions.defaults.json\";\nimport preferencesDefaults from \"./preferences.defaults.json\";\nimport ScoreBoard from \"@/components/ScoreBoard.vue\";\nimport GameInfo from \"@/types/GameInfo\";\nimport GameResult from \"@/types/GameResult\";\nimport WebmidiInputKeyboardAdapter from \"@/WebmidiInputKeyboardAdapter\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport default defineComponent({\n  name: \"App\",\n  data: () => ({\n    showMidiOptions: false,\n    showPreferences: false,\n    midiInput: null as Keyboard | null\n  }),\n  components: {\n    SubscriptionHandlingDeviceSelector,\n    MidiCapability,\n    Challenge,\n    ShowPlay,\n    Preferences,\n    ScoreBoard\n  },\n  computed: {\n    hasKeyboard(): boolean {\n      return !!this.midiInput;\n    }\n  },\n  setup() {\n    return {\n      midiOptions: storedData(\n        \"midiOptions\",\n        midiOptionsDefaults.version.toString(),\n        midiOptionsDefaults.defaults\n      ),\n      preferences: storedData(\n        \"preferences\",\n        preferencesDefaults.version.toString(),\n        preferencesDefaults.defaults\n      ),\n      games: storedData(\"games\", \"1\", [] as GameResult[])\n    };\n  },\n  methods: {\n    deviceChanged(current: Input) {\n      this.midiOptions.input = current.id;\n      this.midiInput = this.wrapMidiInput(current);\n    },\n    midiReady() {\n      if (this.midiOptions.input) {\n        const webmidiInput = WebMidi.getInputById(this.midiOptions.input);\n        this.midiInput = webmidiInput ? this.wrapMidiInput(webmidiInput) : null;\n      }\n      this.showMidiOptions = !this.hasKeyboard;\n    },\n    gameFinished(gameInfo: GameInfo) {\n      this.games.push({\n        name: \"noteReading\",\n        time: new Date().toISOString(),\n        preferences: this.preferences.noteReading,\n        gameInfo\n      } as GameResult);\n    },\n    wrapMidiInput(input: Input) {\n      return new WebmidiInputKeyboardAdapter(input);\n    }\n  }\n});\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <AbcNotation :abc=\"abc\" />\n  <p ref=\"notes\"></p>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport AbcNotation from \"./AbcNotation.vue\";\nimport Midi from \"@tonaljs/midi\";\nimport TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport default defineComponent({\n  name: \"ShowPlay\",\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    }\n  },\n  data: () => ({\n    abc: \"\"\n  }),\n  components: {\n    AbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.midiSubscription);\n  },\n  mounted() {\n    this.keyboard.addListener(this.midiSubscription);\n  },\n  methods: {\n    midiSubscription(pitch: number) {\n      const abc = TonalAbcNotation.scientificToAbcNotation(\n        Midi.midiToNoteName(pitch)\n      );\n      this.abc = `X:1\\nK:C\\n${abc}`;\n      (this.$refs.notes as HTMLElement).innerHTML += `${pitch} (${abc})<br />`;\n    }\n  }\n});\n</script>\n","<template>\n  <div ref=\"notation\"></div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport AbcNotation from \"abcjs\";\nimport \"abcjs/abcjs-midi.css\";\n\nexport default defineComponent({\n  props: {\n    abc: {\n      required: true,\n      type: String\n    }\n  },\n  watch: {\n    abc() {\n      this.render();\n    }\n  },\n  mounted() {\n    this.render();\n  },\n  methods: {\n    render() {\n      if (this.abc === \"\") {\n        return;\n      }\n      AbcNotation.renderAbc(this.$refs.notation as HTMLElement, this.abc, {\n        add_classes: true\n      });\n      this.$emit(\"rendered\");\n    }\n  },\n  emits: [\"rendered\"]\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\nimport AbcNotation from \"abcjs\";\nimport \"abcjs/abcjs-midi.css\";\n\nexport default defineComponent({\n  props: {\n    abc: {\n      required: true,\n      type: String\n    }\n  },\n  watch: {\n    abc() {\n      this.render();\n    }\n  },\n  mounted() {\n    this.render();\n  },\n  methods: {\n    render() {\n      if (this.abc === \"\") {\n        return;\n      }\n      AbcNotation.renderAbc(this.$refs.notation as HTMLElement, this.abc, {\n        add_classes: true\n      });\n      this.$emit(\"rendered\");\n    }\n  },\n  emits: [\"rendered\"]\n});\n","import { render } from \"./AbcNotation.vue?vue&type=template&id=1d6a81d6\"\nimport script from \"./AbcNotation.vue?vue&type=script&lang=ts\"\nexport * from \"./AbcNotation.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, PropType } from \"vue\";\nimport AbcNotation from \"./AbcNotation.vue\";\nimport Midi from \"@tonaljs/midi\";\nimport TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport default defineComponent({\n  name: \"ShowPlay\",\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    }\n  },\n  data: () => ({\n    abc: \"\"\n  }),\n  components: {\n    AbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.midiSubscription);\n  },\n  mounted() {\n    this.keyboard.addListener(this.midiSubscription);\n  },\n  methods: {\n    midiSubscription(pitch: number) {\n      const abc = TonalAbcNotation.scientificToAbcNotation(\n        Midi.midiToNoteName(pitch)\n      );\n      this.abc = `X:1\\nK:C\\n${abc}`;\n      (this.$refs.notes as HTMLElement).innerHTML += `${pitch} (${abc})<br />`;\n    }\n  }\n});\n","import { render } from \"./ShowPlay.vue?vue&type=template&id=479351a5\"\nimport script from \"./ShowPlay.vue?vue&type=script&lang=ts\"\nexport * from \"./ShowPlay.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <h1>{{ $i18n.t(\"game.noteReading.title\") }}</h1>\n    <div v-if=\"gaming\">\n      <p>{{ $i18n.t(\"game.noteReading.description\") }}</p>\n      <AnimatedAbcNotation\n        :abc=\"abc\"\n        :animationDuration=\"speed\"\n        :key=\"`heat_no_${heat}`\"\n      />\n      <span>{{ challenge.pitch }} ({{ challenge.note }})</span>\n      <br />\n      <span>{{ heat }}/{{ heats }}</span>\n      <br />\n      <span>\n        {{ $i18n.t(\"game.noteReading.analysis.successes\") }} {{ successes }},\n        {{ $i18n.t(\"game.noteReading.analysis.mistakes\") }} {{ mistakes }}\n      </span>\n      <br />\n      <button @click=\"finish()\">\n        {{ $i18n.t(\"game.noteReading.stop\") }}\n      </button>\n    </div>\n    <div v-else-if=\"finished\">\n      {{ $i18n.t(\"game.noteReading.finished\") }}<br />\n      {{ $i18n.t(\"game.noteReading.analysis.successes\") }} {{ successes }},\n      {{ $i18n.t(\"game.noteReading.analysis.mistakes\") }} {{ mistakes }}\n      <br />\n      <button @click=\"reset()\">\n        {{ $i18n.t(\"game.noteReading.reset\") }}\n      </button>\n    </div>\n    <div v-else>\n      <button @click=\"start()\">\n        {{ $i18n.t(\"game.noteReading.start\") }}\n      </button>\n      <p>\n        <sub>{{ startViaKeyHint }}</sub>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport AnimatedAbcNotation from \"./AnimatedAbcNotation.vue\";\nimport Midi from \"@tonaljs/midi\";\nimport TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport challengeGenerator, {\n  AccidentalsConfiguration,\n  Challenge\n} from \"@/challengeGenerator\";\nimport { VueI18n } from \"vue-i18n\";\nimport GameInfo from \"@/types/GameInfo\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport const START_ON_KEY = 60; // middle C\n\nexport default defineComponent({\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    },\n    baseNote: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    noteLimit: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    speed: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    accidentals: {\n      required: true,\n      type: String\n    },\n    heats: {\n      default: 10,\n      type: Number\n    }\n  },\n  data: () => ({\n    gaming: false,\n    finished: false,\n    challenge: {} as Challenge,\n    mistakes: 0,\n    successes: 0,\n    timeout: undefined as number | undefined,\n    generator: undefined as Generator<Challenge> | undefined,\n    heat: 0\n  }),\n  components: {\n    AnimatedAbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.evaluateInput);\n  },\n  mounted() {\n    this.keyboard.addListener(this.evaluateInput);\n  },\n  computed: {\n    startViaKeyHint(): string {\n      return (this.$i18n as VueI18n).t(\"game.noteReading.startViaKeyHint\", {\n        key: `${START_ON_KEY} (${this.midiToAbc(START_ON_KEY)})`\n      });\n    },\n    abc(): string {\n      return `X:1\\nK:C\\n${this.challenge.note}`;\n    }\n  },\n  methods: {\n    reset() {\n      // @ts-ignore The 'this' context… is not assignable to method's 'this' - no idea how to make this work nicely\n      Object.assign(this.$data, this.$options.data!.apply(this));\n    },\n    start() {\n      this.reset();\n      this.gaming = true;\n      this.generator = challengeGenerator(\n        this.baseNote,\n        this.noteLimit,\n        AccidentalsConfiguration[\n          this.accidentals as keyof typeof AccidentalsConfiguration\n        ]\n      );\n      this.next();\n    },\n    finish() {\n      window.clearTimeout(this.timeout);\n      this.gaming = false;\n      this.finished = true;\n      this.$emit(\"finished\", {\n        heats: this.heats,\n        heat: this.heat,\n        successes: this.successes,\n        mistakes: this.mistakes\n      } as GameInfo);\n    },\n    next() {\n      if (!this.generator) {\n        throw new Error(\"Can only run after generator was set up\");\n      }\n      const challenge = this.generator.next();\n\n      if (challenge.done || this.heat >= this.heats) {\n        this.finish();\n        return;\n      }\n\n      this.challenge = challenge.value;\n\n      this.timeout = window.setTimeout(this.noResponse, this.speed);\n\n      this.heat++;\n    },\n    evaluateInput(midiPitch: number) {\n      if (this.gaming) {\n        this.evaluateResponse(midiPitch);\n      } else {\n        if (midiPitch === START_ON_KEY) {\n          if (this.finished) {\n            this.reset();\n          } else {\n            this.start();\n          }\n        }\n      }\n    },\n    noResponse() {\n      this.mistakes++;\n      this.next();\n    },\n    evaluateResponse(midiPitch: number) {\n      if (midiPitch === this.challenge.pitch) {\n        window.clearTimeout(this.timeout);\n        this.successes++;\n        this.next();\n      } else {\n        this.mistakes++;\n      }\n    },\n    midiToAbc(pitch: number) {\n      return TonalAbcNotation.scientificToAbcNotation(\n        Midi.midiToNoteName(pitch)\n      );\n    }\n  },\n  emits: [\"finished\"]\n});\n</script>\n","<template>\n  <AbcNotation\n    class=\"animated-abc-notation\"\n    :abc=\"abc\"\n    ref=\"abc\"\n    @rendered=\"postProcessAbc\"\n    :style=\"styleVariables\"\n  />\n</template>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport AbcNotation from \"./AbcNotation\";\n\nexport default defineComponent({\n  components: { AbcNotation },\n  props: {\n    abc: {\n      required: true,\n      type: String\n    },\n    animationDuration: {\n      required: true,\n      type: Number\n    }\n  },\n  data: () => ({\n    abcWidth: 0\n  }),\n  computed: {\n    styleVariables() {\n      return {\n        \"--staff-width\": this.abcWidth - 100 + \"px\",\n        \"--animation-duration\": this.animationDuration + \"ms\"\n      };\n    }\n  },\n  methods: {\n    postProcessAbc() {\n      this.abcWidth = this.$refs.abc.$el.children[0].clientWidth;\n\n      // remove \"margins\" from staff lines which happen to be part of the lines' path\n      this.$refs.abc.$el.querySelectorAll(\".abcjs-staff\").forEach(el => {\n        const pathDefinition = el\n          .getAttribute(\"d\")\n          .replace(\"M 15 \", \"M 0 \")\n          .replace(\"L 15 \", \"L 0 \");\n        el.setAttribute(\"d\", pathDefinition);\n      });\n    }\n  }\n});\n</script>\n\n<style>\n/* auxiliary staff lines match the class, too - selecting \"g\" to make sure we don't stretch those */\n.animated-abc-notation g .abcjs-staff {\n  transform: scaleX(10);\n}\n\n/* that is notes and possibly their respective auxiliary staff line */\n.animated-abc-notation .abcjs-note,\n.animated-abc-notation svg > .abcjs-staff {\n  animation-duration: var(--animation-duration);\n  animation-timing-function: linear;\n  animation-direction: normal;\n  animation-iteration-count: 1;\n  animation-fill-mode: forwards;\n  animation-name: inchacross;\n}\n\n@keyframes inchacross {\n  from {\n    transform: translateX(0);\n  }\n  to {\n    transform: translateX(var(--staff-width));\n  }\n}\n</style>\n","import { render } from \"./AnimatedAbcNotation.vue?vue&type=template&id=15a9cd8e\"\nimport script from \"./AnimatedAbcNotation.vue?vue&type=script&lang=js\"\nexport * from \"./AnimatedAbcNotation.vue?vue&type=script&lang=js\"\n\nimport \"./AnimatedAbcNotation.vue?vue&type=style&index=0&id=15a9cd8e&lang=css\"\nscript.render = render\n\nexport default script","import TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport Midi from \"@tonaljs/midi\";\n\nconst MIDI_TOP_PITCH = 127;\nconst KEYS_IN_OCTAVE = 12;\n\n// get this from a 3rd party. that'd be great\nconst accidentalKeys = [1, 3, 6, 8, 10];\n\nexport enum AccidentalsConfiguration {\n  \"no\" = \"no\",\n  \"sharps\" = \"sharps\",\n  \"flats\" = \"flats\",\n  \"random\" = \"random\"\n}\n\nexport function generatePitchOptions(\n  baseNote: number,\n  noteLimit: number,\n  avoidAccidentals: boolean\n): number[] {\n  const pitches = [];\n  let pitch = -1;\n  for (let octave = -1; octave <= 9; octave++) {\n    for (let note = 0; note < KEYS_IN_OCTAVE; note++) {\n      pitch++;\n\n      if (pitch > MIDI_TOP_PITCH || pitches.length >= noteLimit) {\n        return pitches;\n      }\n\n      if (pitch < baseNote) {\n        continue;\n      }\n      if (avoidAccidentals && accidentalKeys.includes(note)) {\n        continue;\n      }\n\n      pitches.push(pitch);\n    }\n  }\n  return pitches;\n}\n\nfunction getRandomValueFromArray<T>(array: T[]): T {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction repetitionIsAvoidable(noteLimit: number): boolean {\n  return noteLimit !== 1;\n}\n\nfunction midiToAbc(pitch: number, sharps: boolean) {\n  return TonalAbcNotation.scientificToAbcNotation(\n    Midi.midiToNoteName(pitch, { sharps })\n  );\n}\n\nexport class Challenge {\n  constructor(readonly note: string, readonly pitch: number) {}\n}\n\nexport default function*(\n  baseNote: number,\n  noteLimit: number,\n  accidentals: AccidentalsConfiguration\n) {\n  const validPitches = generatePitchOptions(\n    baseNote,\n    noteLimit,\n    accidentals === \"no\"\n  );\n\n  let previous: Challenge | null = null;\n  while (true) {\n    let pitch: number;\n    do {\n      pitch = getRandomValueFromArray(validPitches);\n    } while (\n      previous &&\n      pitch === previous.pitch &&\n      repetitionIsAvoidable(noteLimit)\n    );\n\n    const note = midiToAbc(\n      pitch,\n      accidentals === \"sharps\" ||\n        (accidentals === \"random\" && Math.random() < 0.5)\n    );\n\n    const challenge: Challenge = new Challenge(note, pitch);\n\n    previous = challenge;\n\n    yield challenge;\n  }\n}\n","\nimport { defineComponent, PropType } from \"vue\";\nimport AnimatedAbcNotation from \"./AnimatedAbcNotation.vue\";\nimport Midi from \"@tonaljs/midi\";\nimport TonalAbcNotation from \"@tonaljs/abc-notation\";\nimport challengeGenerator, {\n  AccidentalsConfiguration,\n  Challenge\n} from \"@/challengeGenerator\";\nimport { VueI18n } from \"vue-i18n\";\nimport GameInfo from \"@/types/GameInfo\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport const START_ON_KEY = 60; // middle C\n\nexport default defineComponent({\n  props: {\n    keyboard: {\n      required: true,\n      type: Object as PropType<Keyboard>\n    },\n    baseNote: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    noteLimit: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    speed: {\n      required: true,\n      type: Number,\n      validator: Number.isInteger\n    },\n    accidentals: {\n      required: true,\n      type: String\n    },\n    heats: {\n      default: 10,\n      type: Number\n    }\n  },\n  data: () => ({\n    gaming: false,\n    finished: false,\n    challenge: {} as Challenge,\n    mistakes: 0,\n    successes: 0,\n    timeout: undefined as number | undefined,\n    generator: undefined as Generator<Challenge> | undefined,\n    heat: 0\n  }),\n  components: {\n    AnimatedAbcNotation\n  },\n  unmounted() {\n    this.keyboard.removeListener(this.evaluateInput);\n  },\n  mounted() {\n    this.keyboard.addListener(this.evaluateInput);\n  },\n  computed: {\n    startViaKeyHint(): string {\n      return (this.$i18n as VueI18n).t(\"game.noteReading.startViaKeyHint\", {\n        key: `${START_ON_KEY} (${this.midiToAbc(START_ON_KEY)})`\n      });\n    },\n    abc(): string {\n      return `X:1\\nK:C\\n${this.challenge.note}`;\n    }\n  },\n  methods: {\n    reset() {\n      // @ts-ignore The 'this' context… is not assignable to method's 'this' - no idea how to make this work nicely\n      Object.assign(this.$data, this.$options.data!.apply(this));\n    },\n    start() {\n      this.reset();\n      this.gaming = true;\n      this.generator = challengeGenerator(\n        this.baseNote,\n        this.noteLimit,\n        AccidentalsConfiguration[\n          this.accidentals as keyof typeof AccidentalsConfiguration\n        ]\n      );\n      this.next();\n    },\n    finish() {\n      window.clearTimeout(this.timeout);\n      this.gaming = false;\n      this.finished = true;\n      this.$emit(\"finished\", {\n        heats: this.heats,\n        heat: this.heat,\n        successes: this.successes,\n        mistakes: this.mistakes\n      } as GameInfo);\n    },\n    next() {\n      if (!this.generator) {\n        throw new Error(\"Can only run after generator was set up\");\n      }\n      const challenge = this.generator.next();\n\n      if (challenge.done || this.heat >= this.heats) {\n        this.finish();\n        return;\n      }\n\n      this.challenge = challenge.value;\n\n      this.timeout = window.setTimeout(this.noResponse, this.speed);\n\n      this.heat++;\n    },\n    evaluateInput(midiPitch: number) {\n      if (this.gaming) {\n        this.evaluateResponse(midiPitch);\n      } else {\n        if (midiPitch === START_ON_KEY) {\n          if (this.finished) {\n            this.reset();\n          } else {\n            this.start();\n          }\n        }\n      }\n    },\n    noResponse() {\n      this.mistakes++;\n      this.next();\n    },\n    evaluateResponse(midiPitch: number) {\n      if (midiPitch === this.challenge.pitch) {\n        window.clearTimeout(this.timeout);\n        this.successes++;\n        this.next();\n      } else {\n        this.mistakes++;\n      }\n    },\n    midiToAbc(pitch: number) {\n      return TonalAbcNotation.scientificToAbcNotation(\n        Midi.midiToNoteName(pitch)\n      );\n    }\n  },\n  emits: [\"finished\"]\n});\n","import { render } from \"./Challenge.vue?vue&type=template&id=df1f9528\"\nimport script from \"./Challenge.vue?vue&type=script&lang=ts\"\nexport * from \"./Challenge.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div v-if=\"loading\">\n    {{ $i18n.t(\"midi.loading\") }}\n  </div>\n  <template v-else>\n    <div v-if=\"error\">\n      <i18n-t keypath=\"midi.error\" :tag=\"false\" for=\"midi.compatibilityAnchor\">\n        <a href=\"https://caniuse.com/midi\" target=\"_blank\">\n          {{ $t(\"midi.compatibilityAnchor\") }}\n        </a>\n      </i18n-t>\n    </div>\n    <slot v-else />\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport WebMidi from \"webmidi\";\n\nexport default defineComponent({\n  name: \"MidiCapability\",\n  data: () => ({\n    loading: true,\n    error: false\n  }),\n  unmounted() {\n    WebMidi.disable();\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      WebMidi.enable(err => {\n        this.error = !!err;\n        this.loading = false;\n        this.$emit(\"midiReady\");\n      }, false);\n    }\n  },\n  emits: [\"midiReady\"]\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\nimport WebMidi from \"webmidi\";\n\nexport default defineComponent({\n  name: \"MidiCapability\",\n  data: () => ({\n    loading: true,\n    error: false\n  }),\n  unmounted() {\n    WebMidi.disable();\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      WebMidi.enable(err => {\n        this.error = !!err;\n        this.loading = false;\n        this.$emit(\"midiReady\");\n      }, false);\n    }\n  },\n  emits: [\"midiReady\"]\n});\n","import { render } from \"./MidiCapability.vue?vue&type=template&id=3c622957\"\nimport script from \"./MidiCapability.vue?vue&type=script&lang=ts\"\nexport * from \"./MidiCapability.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <MidiDeviceSelector :preferred=\"preferred\" @deviceChanged=\"deviceChanged\" />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport MidiDeviceSelector from \"./MidiDeviceSelector.vue\";\nimport { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"SubscriptionHandlingDeviceSelector\",\n  components: {\n    MidiDeviceSelector\n  },\n  props: {\n    deviceId: {\n      required: false,\n      type: String\n    }\n  },\n  data: () => ({\n    preferred: \"\"\n  }),\n  created() {\n    if (this.deviceId) {\n      this.preferred = this.deviceId;\n    }\n  },\n  methods: {\n    deviceChanged(current: Input, previous: Input | null) {\n      // remove subscriptions from previous device\n      if (previous && typeof previous.removeListener === \"function\") {\n        previous.removeListener();\n      }\n\n      this.$emit(\"deviceChanged\", current, previous);\n    }\n  },\n  emits: [\"deviceChanged\"]\n});\n</script>\n","<template>\n  <div>\n    <label for=\"jaslmus-settings-midi-device\">\n      {{ $i18n.t(\"midiOptions.input.device.title\") }}\n    </label>\n    <select id=\"jaslmus-settings-midi-device\" v-model=\"selected\">\n      <option disabled value=\"\">\n        {{ $i18n.t(\"midiOptions.input.device.placeholder\") }}\n      </option>\n      <option\n        v-for=\"option in inputs\"\n        v-bind:value=\"option.id\"\n        v-bind:key=\"option.id\"\n      >\n        {{ option.name }} ({{ option.manufacturer }})\n      </option>\n    </select>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport WebMidi, { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"MidiDeviceSelector\",\n  props: {\n    preferred: {\n      required: false,\n      type: String,\n      default: \"\"\n    }\n  },\n  data(): { selected: string; inputs: Input[] } {\n    return {\n      selected: WebMidi.getInputById(this.preferred) ? this.preferred : \"\",\n      inputs: []\n    };\n  },\n  watch: {\n    selected(current, previous) {\n      this.$emit(\n        \"deviceChanged\",\n        WebMidi.getInputById(current) || null,\n        WebMidi.getInputById(previous) || null\n      );\n    }\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      throw new Error(\"WebMidi must be enabled for this component to work!\");\n    }\n\n    this.inputs = WebMidi.inputs;\n  },\n  emits: [\"deviceChanged\"]\n});\n</script>\n\n<style></style>\n","\nimport { defineComponent } from \"vue\";\nimport WebMidi, { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"MidiDeviceSelector\",\n  props: {\n    preferred: {\n      required: false,\n      type: String,\n      default: \"\"\n    }\n  },\n  data(): { selected: string; inputs: Input[] } {\n    return {\n      selected: WebMidi.getInputById(this.preferred) ? this.preferred : \"\",\n      inputs: []\n    };\n  },\n  watch: {\n    selected(current, previous) {\n      this.$emit(\n        \"deviceChanged\",\n        WebMidi.getInputById(current) || null,\n        WebMidi.getInputById(previous) || null\n      );\n    }\n  },\n  created() {\n    if (!WebMidi.enabled) {\n      throw new Error(\"WebMidi must be enabled for this component to work!\");\n    }\n\n    this.inputs = WebMidi.inputs;\n  },\n  emits: [\"deviceChanged\"]\n});\n","import { render } from \"./MidiDeviceSelector.vue?vue&type=template&id=771169cc\"\nimport script from \"./MidiDeviceSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./MidiDeviceSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport MidiDeviceSelector from \"./MidiDeviceSelector.vue\";\nimport { Input } from \"webmidi\";\n\nexport default defineComponent({\n  name: \"SubscriptionHandlingDeviceSelector\",\n  components: {\n    MidiDeviceSelector\n  },\n  props: {\n    deviceId: {\n      required: false,\n      type: String\n    }\n  },\n  data: () => ({\n    preferred: \"\"\n  }),\n  created() {\n    if (this.deviceId) {\n      this.preferred = this.deviceId;\n    }\n  },\n  methods: {\n    deviceChanged(current: Input, previous: Input | null) {\n      // remove subscriptions from previous device\n      if (previous && typeof previous.removeListener === \"function\") {\n        previous.removeListener();\n      }\n\n      this.$emit(\"deviceChanged\", current, previous);\n    }\n  },\n  emits: [\"deviceChanged\"]\n});\n","import { render } from \"./SubscriptionHandlingDeviceSelector.vue?vue&type=template&id=53b35b38\"\nimport script from \"./SubscriptionHandlingDeviceSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./SubscriptionHandlingDeviceSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <h2>{{ $i18n.t(\"preferences.title\") }}</h2>\n    <Fieldset :legend=\"$i18n.t('preferences.noteReading.title')\">\n      <SchemaBasedForm\n        :schema=\"schema.noteReading\"\n        :form-data=\"preferences.noteReading\"\n        i18n-prefix=\"preferences.noteReading\"\n        @updated=\"updated\"\n      />\n    </Fieldset>\n  </div>\n</template>\n\n<script>\nimport Fieldset from \"primevue/fieldset\";\nimport SchemaBasedForm from \"@/components/SchemaBasedForm\";\nimport preferencesSchema from \"@/preferences.schema.json\";\n\nexport default {\n  components: {\n    SchemaBasedForm,\n    Fieldset\n  },\n  props: {\n    preferences: Object\n  },\n  data() {\n    return {\n      schema: preferencesSchema\n    };\n  },\n  emits: [\"updated\"],\n  methods: {\n    updated(noteReadingPreferences) {\n      this.$emit(\"updated\", {\n        ...this.preferences,\n        noteReading: noteReadingPreferences\n      });\n    }\n  }\n};\n</script>\n","<template>\n  <SchemaForm\n    :schema=\"augmentedSchema\"\n    :modelValue=\"formData\"\n    @update:modelValue=\"$emit('updated', $event)\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, markRaw } from \"vue\";\nimport { SchemaFormFactory } from \"formvuelate\";\nimport { VueI18n } from \"vue-i18n\";\nimport FormDropdown from \"@/components/form/FormDropdown.vue\";\n\nmarkRaw(FormDropdown);\n\ninterface OurSchema extends Record<string, OurSchemaProp> {}\n\ninterface OurSchemaProp {\n  component: string;\n  options?: OurSchemaOption[];\n}\n\ninterface OurSchemaOption {\n  id: string;\n  value: string;\n  label?: string;\n}\n\ninterface FormvuelateSchema extends Record<string, FormvuelateSchemaProp> {}\n\ninterface FormvuelateSchemaOption {\n  label: string;\n  value: string;\n}\n\ninterface FormvuelateSchemaProp {\n  component: string;\n  label: string;\n  placeholder: string;\n  options?: FormvuelateSchemaOption[];\n}\n\nexport default defineComponent({\n  props: {\n    schema: {\n      required: true,\n      type: Object as PropType<OurSchema>\n    },\n    formData: {\n      required: true,\n      type: Object\n    },\n    i18nPrefix: {\n      required: true,\n      type: String\n    }\n  },\n  computed: {\n    augmentedSchema(): FormvuelateSchema {\n      return this.augmentSchema(\n        this.schema,\n        this.$i18n as VueI18n,\n        this.i18nPrefix\n      );\n    }\n  },\n  components: {\n    SchemaForm: SchemaFormFactory([], { FormDropdown })\n  },\n  emits: [\"updated\"],\n  methods: {\n    augmentSchema(\n      schema: OurSchema,\n      $i18n: VueI18n,\n      i18nPrefix: string\n    ): FormvuelateSchema {\n      const fields: FormvuelateSchema = {};\n\n      Object.keys(schema).forEach(prop => {\n        const settings = schema[prop];\n\n        const options: FormvuelateSchemaOption[] = [];\n        if (settings.options) {\n          settings.options.forEach(option => {\n            let label;\n            if (option.label) {\n              label = option.label;\n            } else {\n              label = $i18n.t(`${i18nPrefix}.${prop}.options.${option.id}`);\n            }\n            options.push({\n              label,\n              value: option.value\n            });\n          });\n        }\n\n        const placeholderMessage = `${i18nPrefix}.${prop}.placeholder`;\n\n        fields[prop] = {\n          component: settings.component,\n          label: $i18n.t(`${i18nPrefix}.${prop}.label`),\n          placeholder: $i18n.te(placeholderMessage)\n            ? $i18n.t(placeholderMessage)\n            : \"\",\n          options: options.length ? options : undefined\n        };\n      });\n\n      return fields;\n    }\n  }\n});\n</script>\n","<template>\n  <span class=\"p-float-label\">\n    <label :for=\"uuid\">{{ label }}</label>\n    <Dropdown\n      :modelValue=\"modelValue\"\n      :options=\"options\"\n      optionLabel=\"label\"\n      optionValue=\"value\"\n      :placeholder=\"placeholder\"\n      :id=\"uuid\"\n      @change=\"$emit('update:modelValue', $event.value)\"\n    />\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Dropdown from \"primevue/dropdown\";\n\nexport default defineComponent({\n  components: {\n    Dropdown\n  },\n  props: {\n    modelValue: { required: true },\n    label: {\n      type: String,\n      required: true\n    },\n    options: {\n      type: Array,\n      required: true\n    },\n    uuid: {\n      type: Number,\n      default: 0\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:modelValue\"]\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\nimport Dropdown from \"primevue/dropdown\";\n\nexport default defineComponent({\n  components: {\n    Dropdown\n  },\n  props: {\n    modelValue: { required: true },\n    label: {\n      type: String,\n      required: true\n    },\n    options: {\n      type: Array,\n      required: true\n    },\n    uuid: {\n      type: Number,\n      default: 0\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:modelValue\"]\n});\n","import { render } from \"./FormDropdown.vue?vue&type=template&id=13640a67\"\nimport script from \"./FormDropdown.vue?vue&type=script&lang=ts\"\nexport * from \"./FormDropdown.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, PropType, markRaw } from \"vue\";\nimport { SchemaFormFactory } from \"formvuelate\";\nimport { VueI18n } from \"vue-i18n\";\nimport FormDropdown from \"@/components/form/FormDropdown.vue\";\n\nmarkRaw(FormDropdown);\n\ninterface OurSchema extends Record<string, OurSchemaProp> {}\n\ninterface OurSchemaProp {\n  component: string;\n  options?: OurSchemaOption[];\n}\n\ninterface OurSchemaOption {\n  id: string;\n  value: string;\n  label?: string;\n}\n\ninterface FormvuelateSchema extends Record<string, FormvuelateSchemaProp> {}\n\ninterface FormvuelateSchemaOption {\n  label: string;\n  value: string;\n}\n\ninterface FormvuelateSchemaProp {\n  component: string;\n  label: string;\n  placeholder: string;\n  options?: FormvuelateSchemaOption[];\n}\n\nexport default defineComponent({\n  props: {\n    schema: {\n      required: true,\n      type: Object as PropType<OurSchema>\n    },\n    formData: {\n      required: true,\n      type: Object\n    },\n    i18nPrefix: {\n      required: true,\n      type: String\n    }\n  },\n  computed: {\n    augmentedSchema(): FormvuelateSchema {\n      return this.augmentSchema(\n        this.schema,\n        this.$i18n as VueI18n,\n        this.i18nPrefix\n      );\n    }\n  },\n  components: {\n    SchemaForm: SchemaFormFactory([], { FormDropdown })\n  },\n  emits: [\"updated\"],\n  methods: {\n    augmentSchema(\n      schema: OurSchema,\n      $i18n: VueI18n,\n      i18nPrefix: string\n    ): FormvuelateSchema {\n      const fields: FormvuelateSchema = {};\n\n      Object.keys(schema).forEach(prop => {\n        const settings = schema[prop];\n\n        const options: FormvuelateSchemaOption[] = [];\n        if (settings.options) {\n          settings.options.forEach(option => {\n            let label;\n            if (option.label) {\n              label = option.label;\n            } else {\n              label = $i18n.t(`${i18nPrefix}.${prop}.options.${option.id}`);\n            }\n            options.push({\n              label,\n              value: option.value\n            });\n          });\n        }\n\n        const placeholderMessage = `${i18nPrefix}.${prop}.placeholder`;\n\n        fields[prop] = {\n          component: settings.component,\n          label: $i18n.t(`${i18nPrefix}.${prop}.label`),\n          placeholder: $i18n.te(placeholderMessage)\n            ? $i18n.t(placeholderMessage)\n            : \"\",\n          options: options.length ? options : undefined\n        };\n      });\n\n      return fields;\n    }\n  }\n});\n","import { render } from \"./SchemaBasedForm.vue?vue&type=template&id=63d08c57\"\nimport script from \"./SchemaBasedForm.vue?vue&type=script&lang=ts\"\nexport * from \"./SchemaBasedForm.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { render } from \"./Preferences.vue?vue&type=template&id=5f74e4da\"\nimport script from \"./Preferences.vue?vue&type=script&lang=js\"\nexport * from \"./Preferences.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { ref, watch, Ref } from \"vue\";\n\nexport default function storedData<T extends any>(\n  name: string,\n  version: string,\n  defaultValue: T\n): Ref<T> {\n  function buildKey() {\n    return `storedData_${name}_${version}`;\n  }\n\n  const storeValueJSON = window.localStorage.getItem(buildKey());\n  const watchedValue = ref(\n    storeValueJSON ? JSON.parse(storeValueJSON) : defaultValue\n  );\n\n  watch(\n    watchedValue,\n    (newValue: any) => {\n      window.localStorage.setItem(buildKey(), JSON.stringify(newValue));\n    },\n    { deep: true }\n  );\n\n  return watchedValue;\n}\n","<template>\n  <div>\n    <span>{{ $i18n.t(\"scoreBoard.games\") }} {{ games.length }}</span>\n    &mdash;\n    <span>\n      {{ $i18n.t(\"scoreBoard.virtuosicScore\") }}\n      <span v-if=\"games.length\"> {{ Math.round(virtuosicScore * 100) }}% </span>\n      <span v-else>\n        {{ $i18n.t(\"scoreBoard.noVirtuosicScore\") }}\n      </span>\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport GameResult from \"@/types/GameResult\";\n\nexport default defineComponent({\n  props: {\n    games: {\n      required: true,\n      type: Array as PropType<GameResult[]>\n    }\n  },\n  computed: {\n    virtuosicScore(): number {\n      let successes = 0,\n        heats = 0;\n      this.games.forEach(game => {\n        successes += Math.max(\n          game.gameInfo.successes - game.gameInfo.mistakes,\n          1\n        );\n        heats += game.gameInfo.heats;\n      });\n      if (heats === 0) {\n        return 0;\n      }\n      return successes / heats;\n    }\n  }\n});\n</script>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport GameResult from \"@/types/GameResult\";\n\nexport default defineComponent({\n  props: {\n    games: {\n      required: true,\n      type: Array as PropType<GameResult[]>\n    }\n  },\n  computed: {\n    virtuosicScore(): number {\n      let successes = 0,\n        heats = 0;\n      this.games.forEach(game => {\n        successes += Math.max(\n          game.gameInfo.successes - game.gameInfo.mistakes,\n          1\n        );\n        heats += game.gameInfo.heats;\n      });\n      if (heats === 0) {\n        return 0;\n      }\n      return successes / heats;\n    }\n  }\n});\n","import { render } from \"./ScoreBoard.vue?vue&type=template&id=cacc84fc\"\nimport script from \"./ScoreBoard.vue?vue&type=script&lang=ts\"\nexport * from \"./ScoreBoard.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { Input, InputEventNoteon } from \"webmidi\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport default class WebmidiInputKeyboardAdapter implements Keyboard {\n  private listeners: ((event: number) => void)[] = [];\n  private readonly dispatcher: (midiEvent: InputEventNoteon) => void;\n\n  constructor(readonly input: Input) {\n    this.dispatcher = (midiEvent: InputEventNoteon) => {\n      this.listeners.forEach(listener => listener(midiEvent.data[1]));\n    };\n  }\n\n  addListener(listener: (event: number) => void): this {\n    this.listeners.push(listener);\n    if (this.listeners.length === 1) {\n      this.input.addListener(\"noteon\", \"all\", this.dispatcher);\n    }\n    return this;\n  }\n\n  removeListener(listener?: (event: any) => void): this {\n    if (listener) {\n      const index = this.listeners.indexOf(listener);\n      this.listeners.splice(index, 1);\n    } else {\n      this.listeners = [];\n    }\n    if (this.listeners.length === 0) {\n      this.input.removeListener(\"noteon\", \"all\", this.dispatcher);\n    }\n    return this;\n  }\n}\n","\nimport { defineComponent } from \"vue\";\nimport ShowPlay from \"./components/ShowPlay.vue\";\nimport Challenge from \"./components/Challenge.vue\";\nimport MidiCapability from \"./components/MidiCapability.vue\";\nimport SubscriptionHandlingDeviceSelector from \"./components/SubscriptionHandlingDeviceSelector.vue\";\nimport Preferences from \"@/components/Preferences.vue\";\nimport WebMidi, { Input } from \"webmidi\";\nimport storedData from \"@/storedData\";\nimport midiOptionsDefaults from \"./midiOptions.defaults.json\";\nimport preferencesDefaults from \"./preferences.defaults.json\";\nimport ScoreBoard from \"@/components/ScoreBoard.vue\";\nimport GameInfo from \"@/types/GameInfo\";\nimport GameResult from \"@/types/GameResult\";\nimport WebmidiInputKeyboardAdapter from \"@/WebmidiInputKeyboardAdapter\";\nimport Keyboard from \"@/types/Keyboard\";\n\nexport default defineComponent({\n  name: \"App\",\n  data: () => ({\n    showMidiOptions: false,\n    showPreferences: false,\n    midiInput: null as Keyboard | null\n  }),\n  components: {\n    SubscriptionHandlingDeviceSelector,\n    MidiCapability,\n    Challenge,\n    ShowPlay,\n    Preferences,\n    ScoreBoard\n  },\n  computed: {\n    hasKeyboard(): boolean {\n      return !!this.midiInput;\n    }\n  },\n  setup() {\n    return {\n      midiOptions: storedData(\n        \"midiOptions\",\n        midiOptionsDefaults.version.toString(),\n        midiOptionsDefaults.defaults\n      ),\n      preferences: storedData(\n        \"preferences\",\n        preferencesDefaults.version.toString(),\n        preferencesDefaults.defaults\n      ),\n      games: storedData(\"games\", \"1\", [] as GameResult[])\n    };\n  },\n  methods: {\n    deviceChanged(current: Input) {\n      this.midiOptions.input = current.id;\n      this.midiInput = this.wrapMidiInput(current);\n    },\n    midiReady() {\n      if (this.midiOptions.input) {\n        const webmidiInput = WebMidi.getInputById(this.midiOptions.input);\n        this.midiInput = webmidiInput ? this.wrapMidiInput(webmidiInput) : null;\n      }\n      this.showMidiOptions = !this.hasKeyboard;\n    },\n    gameFinished(gameInfo: GameInfo) {\n      this.games.push({\n        name: \"noteReading\",\n        time: new Date().toISOString(),\n        preferences: this.preferences.noteReading,\n        gameInfo\n      } as GameResult);\n    },\n    wrapMidiInput(input: Input) {\n      return new WebmidiInputKeyboardAdapter(input);\n    }\n  }\n});\n","import { render } from \"./App.vue?vue&type=template&id=382f343e\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=382f343e&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport { createI18n } from \"vue-i18n\";\nimport englishI18n from \"../i18n/en.json\";\n\nimport PrimeVue from \"primevue/config\";\nimport \"primevue/resources/themes/saga-blue/theme.css\";\nimport \"primevue/resources/primevue.min.css\";\nimport \"primeicons/primeicons.css\";\n\nconst i18n = createI18n({\n  locale: \"en\",\n  messages: {\n    en: englishI18n\n  }\n});\n\ncreateApp(App)\n  .use(i18n)\n  .use(PrimeVue)\n  .mount(\"#app\");\n"],"sourceRoot":""}